
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="getting-started.html">
      
      
        <link rel="next" href="yamtl-ide.html">
      
      
      <link rel="icon" href="assets/site-files/yamtl/favicon.ico">
      <meta name="generator" content="mkdocs-1.5.3, mkdocs-material-9.4.8">
    
    
      
        <title>Language Reference - YAMTL</title>
      
    
    
      <link rel="stylesheet" href="assets/stylesheets/main.4b4a2bd9.min.css">
      
        
        <link rel="stylesheet" href="assets/stylesheets/palette.356b1318.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="stylesheets/extra.scss">
    
    <script>__md_scope=new URL(".",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      
  


  
  

<script id="__analytics">function __md_analytics(){function n(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],n("js",new Date),n("config","UA-78418237-2"),document.addEventListener("DOMContentLoaded",function(){document.forms.search&&document.forms.search.query.addEventListener("blur",function(){this.value&&n("event","search",{search_term:this.value})}),document$.subscribe(function(){var a=document.forms.feedback;if(void 0!==a)for(var e of a.querySelectorAll("[type=submit]"))e.addEventListener("click",function(e){e.preventDefault();var t=document.location.pathname,e=this.getAttribute("data-md-value");n("event","feedback",{page:t,data:e}),a.firstElementChild.disabled=!0;e=a.querySelector(".md-feedback__note [data-md-value='"+e+"']");e&&(e.hidden=!1)}),a.hidden=!1}),location$.subscribe(function(e){n("config","UA-78418237-2",{page_path:e.pathname})})});var e=document.createElement("script");e.async=!0,e.src="https://www.googletagmanager.com/gtag/js?id=UA-78418237-2",document.getElementById("__analytics").insertAdjacentElement("afterEnd",e)}</script>
  
    <script>var consent;"undefined"==typeof __md_analytics||(consent=__md_get("__consent"))&&consent.analytics&&__md_analytics()</script>
  

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="pink" data-md-color-accent="amber">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#yamtl-language-reference" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="index.html" title="YAMTL" class="md-header__button md-logo" aria-label="YAMTL" data-md-component="logo">
      
  <img src="assets/site-files/yamtl-white/favicon-32x32.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            YAMTL
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Language Reference
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="pink" data-md-color-accent="amber"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2a7 7 0 0 1 7 7c0 2.38-1.19 4.47-3 5.74V17a1 1 0 0 1-1 1H9a1 1 0 0 1-1-1v-2.26C6.19 13.47 5 11.38 5 9a7 7 0 0 1 7-7M9 21v-1h6v1a1 1 0 0 1-1 1h-4a1 1 0 0 1-1-1m3-17a5 5 0 0 0-5 5c0 2.05 1.23 3.81 3 4.58V16h4v-2.42c1.77-.77 3-2.53 3-4.58a5 5 0 0 0-5-5Z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="pink" data-md-color-accent="amber"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_2">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2a7 7 0 0 0-7 7c0 2.38 1.19 4.47 3 5.74V17a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1v-2.26c1.81-1.27 3-3.36 3-5.74a7 7 0 0 0-7-7M9 21a1 1 0 0 0 1 1h4a1 1 0 0 0 1-1v-1H9v1Z"/></svg>
      </label>
    
  
</form>
      
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="index.html" title="YAMTL" class="md-nav__button md-logo" aria-label="YAMTL" data-md-component="logo">
      
  <img src="assets/site-files/yamtl-white/favicon-32x32.png" alt="logo">

    </a>
    YAMTL
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="index.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="getting-started.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Getting Started
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Language Reference
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="yamtl-reference.html" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Language Reference
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#basic-syntax" class="md-nav__link">
    Basic Syntax
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#yamtl-semantics" class="md-nav__link">
    YAMTL Semantics
  </a>
  
    <nav class="md-nav" aria-label="YAMTL Semantics">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pattern-matching-semantics" class="md-nav__link">
    Pattern Matching Semantics
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#out-place-transformation-semantics" class="md-nav__link">
    Out-place Transformation Semantics
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#in-place-semantics" class="md-nav__link">
    In-place Semantics
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#yamtl-rules" class="md-nav__link">
    YAMTL Rules
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#fetch" class="md-nav__link">
    fetch()
  </a>
  
    <nav class="md-nav" aria-label="fetch()">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#multiple-elements-in-the-input-pattern" class="md-nav__link">
    Multiple elements in the Input Pattern
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#multiple-elements-in-the-output-pattern" class="md-nav__link">
    Multiple Elements in the Output Pattern
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#calling-lazy-rules" class="md-nav__link">
    Calling Lazy Rules
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#helpers" class="md-nav__link">
    Helpers
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#handling-tomany-rules" class="md-nav__link">
    Handling ToMany Rules
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#variables-in-execution-context" class="md-nav__link">
    Variables in Execution Context
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#allinstanceseclass" class="md-nav__link">
    allInstances(EClass)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lazy-rules" class="md-nav__link">
    Lazy Rules
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#helpers_1" class="md-nav__link">
    Helpers
  </a>
  
    <nav class="md-nav" aria-label="Helpers">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#attribute-helpers" class="md-nav__link">
    Attribute Helpers
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#static-operation" class="md-nav__link">
    Static Operation
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#contextual-operation" class="md-nav__link">
    Contextual Operation
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#tomany-rules" class="md-nav__link">
    ToMany Rules
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#rule-inheritance" class="md-nav__link">
    Rule Inheritance
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#module-composition" class="md-nav__link">
    Module Composition
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#incremental-model-to-model-transformations" class="md-nav__link">
    Incremental Model-to-Model Transformations
  </a>
  
    <nav class="md-nav" aria-label="Incremental Model-to-Model Transformations">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#template-to-execute-model-transformations" class="md-nav__link">
    Template to execute model transformations
  </a>
  
    <nav class="md-nav" aria-label="Template to execute model transformations">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#using-on-the-fly-changes" class="md-nav__link">
    Using On-the-Fly Changes
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#using-offline-changes" class="md-nav__link">
    Using Offline Changes
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#incrementality-granularity" class="md-nav__link">
    Incrementality granularity
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#undo" class="md-nav__link">
    Undo
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#implicit-vs-explicit-traceability" class="md-nav__link">
    Implicit vs explicit traceability
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#examples" class="md-nav__link">
    Examples
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#trade-offs-regarding-performance" class="md-nav__link">
    Trade-offs regarding performance
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="https://yamtl.github.io/playground/?activities=https://yamtl.github.io/playground-activities/yamtl-demo-activity.yml" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Playground
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="yamtl-ide.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Choosing an IDE
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Examples
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            Examples
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="examples/examples.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Examples Repository
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="examples/linked-list-reversal-example.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Linked List Reversal
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="examples/flowchart-to-html-example.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Flowchart to HTML
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7" >
        
          
          <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Exercises
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            Exercises
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="exercises/flowchart-to-html-worksheet.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Flowchart to HTML
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="release-notes.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Release Notes
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="contact-us.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Contact Us
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#basic-syntax" class="md-nav__link">
    Basic Syntax
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#yamtl-semantics" class="md-nav__link">
    YAMTL Semantics
  </a>
  
    <nav class="md-nav" aria-label="YAMTL Semantics">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pattern-matching-semantics" class="md-nav__link">
    Pattern Matching Semantics
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#out-place-transformation-semantics" class="md-nav__link">
    Out-place Transformation Semantics
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#in-place-semantics" class="md-nav__link">
    In-place Semantics
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#yamtl-rules" class="md-nav__link">
    YAMTL Rules
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#fetch" class="md-nav__link">
    fetch()
  </a>
  
    <nav class="md-nav" aria-label="fetch()">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#multiple-elements-in-the-input-pattern" class="md-nav__link">
    Multiple elements in the Input Pattern
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#multiple-elements-in-the-output-pattern" class="md-nav__link">
    Multiple Elements in the Output Pattern
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#calling-lazy-rules" class="md-nav__link">
    Calling Lazy Rules
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#helpers" class="md-nav__link">
    Helpers
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#handling-tomany-rules" class="md-nav__link">
    Handling ToMany Rules
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#variables-in-execution-context" class="md-nav__link">
    Variables in Execution Context
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#allinstanceseclass" class="md-nav__link">
    allInstances(EClass)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lazy-rules" class="md-nav__link">
    Lazy Rules
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#helpers_1" class="md-nav__link">
    Helpers
  </a>
  
    <nav class="md-nav" aria-label="Helpers">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#attribute-helpers" class="md-nav__link">
    Attribute Helpers
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#static-operation" class="md-nav__link">
    Static Operation
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#contextual-operation" class="md-nav__link">
    Contextual Operation
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#tomany-rules" class="md-nav__link">
    ToMany Rules
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#rule-inheritance" class="md-nav__link">
    Rule Inheritance
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#module-composition" class="md-nav__link">
    Module Composition
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#incremental-model-to-model-transformations" class="md-nav__link">
    Incremental Model-to-Model Transformations
  </a>
  
    <nav class="md-nav" aria-label="Incremental Model-to-Model Transformations">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#template-to-execute-model-transformations" class="md-nav__link">
    Template to execute model transformations
  </a>
  
    <nav class="md-nav" aria-label="Template to execute model transformations">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#using-on-the-fly-changes" class="md-nav__link">
    Using On-the-Fly Changes
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#using-offline-changes" class="md-nav__link">
    Using Offline Changes
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#incrementality-granularity" class="md-nav__link">
    Incrementality granularity
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#undo" class="md-nav__link">
    Undo
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#implicit-vs-explicit-traceability" class="md-nav__link">
    Implicit vs explicit traceability
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#examples" class="md-nav__link">
    Examples
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#trade-offs-regarding-performance" class="md-nav__link">
    Trade-offs regarding performance
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<h1 id="yamtl-language-reference">YAMTL Language Reference</h1>
<h2 id="basic-syntax">Basic Syntax</h2>
<p>A YAMTL model transformation is defined as a class that specializes the <code>YAMTLModule</code> class, which provides access to the YAMTL DSL and to methods to configure and execute model transformations:</p>
<div class="tabbed-set tabbed-alternate" data-tabs="1:4"><input checked="checked" id="__tabbed_1_1" name="__tabbed_1" type="radio" /><input id="__tabbed_1_2" name="__tabbed_1" type="radio" /><input id="__tabbed_1_3" name="__tabbed_1" type="radio" /><input id="__tabbed_1_4" name="__tabbed_1" type="radio" /><div class="tabbed-labels"><label for="__tabbed_1_1">Groovy</label><label for="__tabbed_1_2">Xtend</label><label for="__tabbed_1_3">Java</label><label for="__tabbed_1_4">Kotlin</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="language-yamtl-groovy highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="kd">class</span><span class="w"> </span><span class="err">&lt;</span><span class="nc">name</span><span class="o">&gt;</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">YAMTLModule</span><span class="w"> </span><span class="o">{</span>
</span><span id="__span-0-2"><a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="o">&lt;</span><span class="n">name</span><span class="o">&gt;</span><span class="w"> </span><span class="o">(</span><span class="nb">EPackage</span><span class="w"> </span><span class="o">&lt;</span><span class="n">pk1</span><span class="o">&gt;,</span><span class="w"> </span><span class="nb">EPackage</span><span class="w"> </span><span class="o">&lt;</span><span class="n">pk2</span><span class="o">&gt;)</span><span class="w"> </span><span class="o">{</span>
</span><span id="__span-0-3"><a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="w">        </span><span class="n">YAMTLGroovyExtensions_dynamicEMF</span><span class="o">.</span><span class="na">init</span><span class="o">(</span><span class="k">this</span><span class="o">)</span>
</span><span id="__span-0-4"><a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="w">        </span><span class="n">header</span><span class="o">().</span><span class="cp">in</span><span class="o">(&lt;</span><span class="n">in_domain_name1</span><span class="o">&gt;,&lt;</span><span class="n">pk1</span><span class="o">&gt;).</span><span class="cp">out</span><span class="o">(&lt;</span><span class="n">in_domain_name2</span><span class="o">&gt;,&lt;</span><span class="n">pk2</span><span class="o">&gt;)</span>
</span><span id="__span-0-5"><a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a><span class="w">        </span><span class="kd">ruleStore</span><span class="o">([</span><span class="w"> </span><span class="cm">/* rules here */</span><span class="w"> </span><span class="o">])</span>
</span><span id="__span-0-6"><a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a><span class="w">        </span><span class="kd">helperStore</span><span class="o">([</span><span class="w">  </span><span class="cm">/* managed helpers here */</span><span class="w"> </span><span class="o">])</span>
</span><span id="__span-0-7"><a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a><span class="w">    </span><span class="o">}</span>
</span><span id="__span-0-8"><a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a><span class="o">}</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="language-yamtl-xtend highlight"><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="kd">class</span><span class="w"> </span><span class="err">&lt;</span><span class="nc">name</span><span class="o">&gt;</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">YAMTLModule</span><span class="w"> </span><span class="o">{</span>
</span><span id="__span-1-2"><a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a><span class="w">    </span><span class="k">new</span><span class="o">(</span><span class="n">EPackage</span><span class="w"> </span><span class="o">&lt;</span><span class="n">pk1</span><span class="o">&gt;,</span><span class="w"> </span><span class="n">EPackage</span><span class="w"> </span><span class="o">&lt;</span><span class="n">pk2</span><span class="o">&gt;)</span><span class="w"> </span><span class="o">{</span>
</span><span id="__span-1-3"><a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a><span class="w">        </span><span class="n">header</span><span class="o">().</span><span class="cp">in</span><span class="o">(&lt;</span><span class="n">in_domain_name1</span><span class="o">&gt;,&lt;</span><span class="n">pk1</span><span class="o">&gt;).</span><span class="cp">out</span><span class="o">(&lt;</span><span class="n">in_domain_name2</span><span class="o">&gt;,&lt;</span><span class="n">pk2</span><span class="o">&gt;)</span>
</span><span id="__span-1-4"><a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a><span class="w">        </span><span class="kd">ruleStore</span><span class="o">(</span><span class="err">#</span><span class="o">[</span><span class="w"> </span><span class="cm">/* rules here */</span><span class="w"> </span><span class="o">])</span>
</span><span id="__span-1-5"><a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a><span class="w">        </span><span class="kd">helperStore</span><span class="o">(</span><span class="err">#</span><span class="o">[</span><span class="w"> </span><span class="cm">/* managed helpers here */</span><span class="w"> </span><span class="o">])</span>
</span><span id="__span-1-6"><a id="__codelineno-1-6" name="__codelineno-1-6" href="#__codelineno-1-6"></a><span class="w">    </span><span class="o">}</span>
</span><span id="__span-1-7"><a id="__codelineno-1-7" name="__codelineno-1-7" href="#__codelineno-1-7"></a><span class="o">}</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="language-yamtl-java highlight"><pre><span></span><code><span id="__span-2-1"><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="err">&lt;</span><span class="nc">name</span><span class="o">&gt;</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">YAMTLModule</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-2-2"><a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="o">&lt;</span><span class="n">name</span><span class="o">&gt;</span><span class="p">(</span><span class="n">EPackage</span><span class="w"> </span><span class="o">&lt;</span><span class="n">pk1</span><span class="o">&gt;</span><span class="p">,</span><span class="w"> </span><span class="n">EPackage</span><span class="w"> </span><span class="o">&lt;</span><span class="n">pk2</span><span class="o">&gt;</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-2-3"><a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a><span class="w">        </span><span class="n">header</span><span class="p">().</span><span class="na">in</span><span class="p">(</span><span class="o">&lt;</span><span class="n">in_domain_name1</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">pk1</span><span class="o">&gt;</span><span class="p">).</span><span class="na">out</span><span class="p">(</span><span class="o">&lt;</span><span class="n">in_domain_name2</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">pk2</span><span class="o">&gt;</span><span class="p">);</span>
</span><span id="__span-2-4"><a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a><span class="w">        </span><span class="kd">ruleStore</span><span class="p">(</span><span class="n">List</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="w"> </span><span class="cm">/* rules here */</span><span class="w"> </span><span class="p">));</span>
</span><span id="__span-2-5"><a id="__codelineno-2-5" name="__codelineno-2-5" href="#__codelineno-2-5"></a><span class="w">        </span><span class="kd">helperStore</span><span class="p">(</span><span class="n">List</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="w"> </span><span class="cm">/* managed helpers here */</span><span class="w"> </span><span class="p">));</span>
</span><span id="__span-2-6"><a id="__codelineno-2-6" name="__codelineno-2-6" href="#__codelineno-2-6"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-2-7"><a id="__codelineno-2-7" name="__codelineno-2-7" href="#__codelineno-2-7"></a><span class="p">}</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="language-yamtl-kotlin highlight"><pre><span></span><code><span id="__span-3-1"><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a><span class="kd">class</span><span class="w"> </span><span class="err">&lt;</span><span class="nc">name</span><span class="o">&gt;</span><span class="p">(</span><span class="o">&lt;</span><span class="n">pk1</span><span class="o">&gt;</span><span class="p">:</span><span class="w"> </span><span class="n">EPackage</span><span class="p">,</span><span class="w"> </span><span class="o">&lt;</span><span class="n">pk2</span><span class="o">&gt;</span><span class="p">:</span><span class="w"> </span><span class="n">EPackage</span><span class="p">)</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">YAMTLModule</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-3-2"><a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a><span class="w">    </span><span class="k">init</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-3-3"><a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a><span class="w">        </span><span class="n">header</span><span class="p">().</span><span class="n">`in`</span><span class="p">(</span><span class="o">&lt;</span><span class="n">in_domain_name1</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">pk1</span><span class="o">&gt;</span><span class="p">).</span><span class="na">out</span><span class="p">(</span><span class="o">&lt;</span><span class="n">in_domain_name2</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">pk2</span><span class="o">&gt;</span><span class="p">)</span>
</span><span id="__span-3-4"><a id="__codelineno-3-4" name="__codelineno-3-4" href="#__codelineno-3-4"></a><span class="w">        </span><span class="kd">ruleStore</span><span class="p">(</span><span class="n">listOf</span><span class="p">(</span><span class="w"> </span><span class="cm">/* rules here */</span><span class="w"> </span><span class="p">))</span>
</span><span id="__span-3-5"><a id="__codelineno-3-5" name="__codelineno-3-5" href="#__codelineno-3-5"></a><span class="w">        </span><span class="kd">helperStore</span><span class="p">(</span><span class="n">listOf</span><span class="p">(</span><span class="w"> </span><span class="cm">/* managed helpers here */</span><span class="w"> </span><span class="p">))</span>
</span><span id="__span-3-6"><a id="__codelineno-3-6" name="__codelineno-3-6" href="#__codelineno-3-6"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-3-7"><a id="__codelineno-3-7" name="__codelineno-3-7" href="#__codelineno-3-7"></a><span class="p">}</span>
</span></code></pre></div>
</div>
</div>
</div>
<p>In the code above there are four important sections:</p>
<ul>
<li><strong>Constructor</strong> signature: It should include the different metamodels (<code>EPackage</code> instances) used in the transformation. </li>
<li><strong>Header</strong>: This section declares the signature of the model transformation using a unique name for each domain and its corresponding metamodel, which can be shared across domains.  </li>
<li><strong>Rule Store</strong>: This section declares a list of transformation rules.</li>
<li><strong>Helper Store (Optional)</strong>: Accepts a list of managed helpers. Managed helpers are attributes or methods that are optimized in YAMTL using an internal cache for their results. Unmanaged helpers are declared as standard methods of the module class. This section is optional if no managed helpers are needed.</li>
</ul>
<p>The basic format of a YAMTL rule definition is as follows:</p>
<div class="language-yamtl-groovy highlight"><pre><span></span><code><span id="__span-4-1"><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a><span class="n">rule</span><span class="o">(</span><span class="s">&quot;&lt;name&gt;&quot;</span><span class="o">)</span>
</span><span id="__span-4-2"><a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a><span class="w">    </span><span class="o">.</span><span class="cp">in</span><span class="o">(</span><span class="s">&quot;&lt;in_object_name&gt;&quot;</span><span class="o">,</span><span class="w"> </span><span class="o">&lt;</span><span class="n">in_object_type</span><span class="o">&gt;)</span>
</span><span id="__span-4-3"><a id="__codelineno-4-3" name="__codelineno-4-3" href="#__codelineno-4-3"></a><span class="w">        </span><span class="o">[.</span><span class="na">derivedWith</span><span class="o">(&lt;</span><span class="n">QUERY</span><span class="o">&gt;)]?</span>
</span><span id="__span-4-4"><a id="__codelineno-4-4" name="__codelineno-4-4" href="#__codelineno-4-4"></a><span class="w">        </span><span class="o">[.</span><span class="na">filter</span><span class="o">(&lt;</span><span class="n">FILTER</span><span class="o">&gt;)]?</span>
</span><span id="__span-4-5"><a id="__codelineno-4-5" name="__codelineno-4-5" href="#__codelineno-4-5"></a><span class="w">    </span><span class="o">.</span><span class="cp">out</span><span class="o">(</span><span class="s">&quot;&lt;out_object_name&gt;&quot;</span><span class="o">,</span><span class="w"> </span><span class="o">&lt;</span><span class="n">out_object_type</span><span class="o">&gt;,</span><span class="w"> </span><span class="o">&lt;</span><span class="n">ACTION</span><span class="o">&gt;)</span>
</span></code></pre></div>
<div class="admonition info">
<p class="admonition-title">Legend</p>
<p><code>&lt;&gt;</code> indicates user-definable expressions. Note that these are placeholders and not part of the actual YAMTL syntax. Lowercase snake case (e.g., <code>in_object_name</code>) usually denotes variable names and types, including lists of variable names. Uppercase snake case (e.g., <code>&lt;FILTER&gt;</code> or <code>&lt;ACTION&gt;</code>) represents lambda expressions, and they are written using the syntax of the host language. <code>[]?</code> means optional.</p>
</div>
<p>A rule is declared using <code>rule("&lt;name&gt;")</code> with a rule name. The static operation <code>rule</code> can be used with <code>import static yamtl.dsl.Rule.*</code>. Each rule consists of one or more input element(s), defined using <code>in("&lt;in_object_name&gt;", &lt;in_object_type&gt;)</code> operation that requires a source element name and type; an optional <code>.derivedWith(&lt;QUERY&gt;)</code> clause where <code>&lt;QUERY&gt;</code> is a lambda expression of type <code>Supplier&lt;EObject&gt;</code> that produces the object that will be matched to the input element; an optional filter condition expressed with <code>filter(&lt;FILTER&gt;)</code> where <code>&lt;FILTER&gt;</code> is a lambda expression of type <code>Supplier&lt;Boolean&gt;</code>; and one or more output element(s), declared with <code>out("out_object_name", &lt;out_object_type&gt;, &lt;ACTION&gt;)</code> requiring a target element name and type, along with a side-effecting lambda expression <code>&lt;ACTION&gt;</code> of type <code>Runnable</code> containing action statements that initialize or update the output object attributes and references. <br></p>
<h2 id="yamtl-semantics">YAMTL Semantics</h2>
<p>Model transformations can be used to define model queries by using pattern matching, out-place model transformation by <em>mapping</em> an input model into a <em>new</em> output model, or in-place model transformations by <em>rewriting</em> a given model.</p>
<h3 id="pattern-matching-semantics">Pattern Matching Semantics</h3>
<p>Pattern matching is the process by which YAMTL tries to find object graphs in the input model where the input pattern of a rule can be matched. </p>
<p>There are two main types of input elements: <strong>matched</strong> elements, which are mapped by YAMTL to objects in the input model, and <strong>derived</strong> elements, which are defined with a <code>.derivedWith(&lt;QUERY&gt;)</code> clause and need to be derived from input elements that have been matched in preceding input elements. </p>
<p>To find a match for a rule, YAMTL first maps each matched input element of the rule to objects in the input model in the order in which they appear. For derived elements, YAMTL tries to complete the total match by processing query expressions in the order that they were declared. If a query cannot be resolved to an object, that rule's match is invalid. </p>
<p>A match for a matched rule must be <strong>unique</strong>. That is, no other rule should be applicable to the same match. Uniqueness of matches is checked at runtime using the flag <code>YAMTLModule::setEnableCorrectnessCheck(Boolean)</code>, which is <code>true</code> by default. Non-unique matches are allowed when using <a href="#lazy-rules">lazy rules</a>, which are called on demand, and when using <a href="#tomany-rules">ToMany rules</a>, which create a fixed number of rule application for the same match.</p>
<p>A match is <strong>complete</strong> when all input elements are mapped to objects, either implicitly via matched input elements or explicitly via derived input elements. A match is defined as a map where the key is the input variable name and the value is the corresponding matched <code>EObject</code>.</p>
<div class="admonition tip">
<p class="admonition-title">Model-sensitive pattern matching</p>
<p>The input elements are ordered by the size of their type extent (smaller-sized types are matched before bigger ones) when enabling the flag <code>YAMTLModule::setEnabledMatchingInputElementOrderBySize(true)</code>. This can lead to significant run-time improvements when the distribution of objects across types is imbalanced.</p>
<p>This optimization can, however, cause problems when the order of the input elements alters the order in which input element declaration is expected in filter expressions. For example, assuming that <code>Type1</code> declares a boolean method <code>isEnabled()</code> and that <code>Type2</code> has fewer objects than <code>Type1</code>, the order of input elements in the following input pattern</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-5-1"><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a>.in(&quot;a&quot;, Type1)
</span><span id="__span-5-2"><a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a>.in(&quot;b&quot;, Type2).filter{ a.isEnabled() }
</span></code></pre></div>
<p>will be changed by the flag <code>setEnabledMatchingInputElementOrderBySize</code>. This will cause a problem because the input element <code>b</code> will be evaluated first and its filter condition needs "a" to be matched first. In such cases, the flag <code>YAMTLModule::setEnabledMatchingInputElementOrderBySize</code> must be kept disabled.</p>
</div>
<p>A match for a rule is <strong>valid</strong> when it is unique, complete and all of the filters of the input pattern are satisfied. Filters come in two flavours:</p>
<ul>
<li><strong>Local filters</strong>: defined for an input element <code>.in("&lt;in_object_name&gt;", &lt;in_object_type&gt;).filter(&lt;FILTER&gt;)</code>. The lambda expression <code>&lt;FILTER&gt;</code> can use any object variable declared in a preceding input element.</li>
<li><strong>Global filters</strong>: defined for the last input element of the input pattern. All input object variables can be used for defining the filter expression. A single global filter can be defined for a rule using the clause <code>.globalFilter(&lt;FILTER&gt;)</code> at the end of the input pattern. </li>
</ul>
<div class="admonition tip">
<p class="admonition-title">Design principles for efficient pattern matching</p>
<ol>
<li>
<p>Matched input elements should only be defined for matching objects that are not related to each other through references. If they are then they should be defined as derived elements instead.</p>
</li>
<li>
<p>Local element filter conditions should be opted for instead of global rule filter conditions to help the matching algorithm remove invalid matches as soon as possible (reduces execution time).</p>
</li>
<li>
<p>Once it is known that only unique matches are found within a model for a given set of rules, the model transformation containing them can be executed more efficiently by disabling the uniqueness correctness check with <code>YAMTLModule::setEnableCorrectnessCheck(false)</code>.</p>
</li>
</ol>
</div>
<p>YAMTL's pattern matcher can be used to implement model queries. A model query is a rule that only has an input pattern and that may have a final action block <code>endWith(&lt;ACTION&gt;)</code>:</p>
<div class="language-yamtl-groovy highlight"><pre><span></span><code><span id="__span-6-1"><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a><span class="n">rule</span><span class="o">(</span><span class="s">&quot;&lt;name&gt;&quot;</span><span class="o">)</span>
</span><span id="__span-6-2"><a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a><span class="w">    </span><span class="o">.</span><span class="cp">in</span><span class="o">(</span><span class="s">&quot;&lt;in_object_name&gt;&quot;</span><span class="o">,</span><span class="w"> </span><span class="o">&lt;</span><span class="n">in_object_type</span><span class="o">&gt;)[.</span><span class="na">derivedWith</span><span class="o">(&lt;</span><span class="n">QUERY</span><span class="o">&gt;)]?[.</span><span class="na">filter</span><span class="o">(&lt;</span><span class="n">FILTER</span><span class="o">&gt;)]?</span>
</span><span id="__span-6-3"><a id="__codelineno-6-3" name="__codelineno-6-3" href="#__codelineno-6-3"></a><span class="w">    </span><span class="o">.</span><span class="na">query</span><span class="o">()</span>
</span><span id="__span-6-4"><a id="__codelineno-6-4" name="__codelineno-6-4" href="#__codelineno-6-4"></a><span class="w">    </span><span class="o">[.</span><span class="na">endWith</span><span class="o">(&lt;</span><span class="n">ACTION</span><span class="o">&gt;)]?</span>
</span></code></pre></div>
<p>The <code>&lt;ACTION&gt;</code> in <code>endWith(&lt;ACTION&gt;)</code> is a lambda expression of type <code>Runnable</code> that may use the input element variables to perform some action on the input objects that have been matched, e.g., reporting error messages or computing metrics.</p>
<p>To configure and execute a YAMTL module for implementing rule-based queries, use the following template:</p>
<div class="tabbed-set tabbed-alternate" data-tabs="2:4"><input checked="checked" id="__tabbed_2_1" name="__tabbed_2" type="radio" /><input id="__tabbed_2_2" name="__tabbed_2" type="radio" /><input id="__tabbed_2_3" name="__tabbed_2" type="radio" /><input id="__tabbed_2_4" name="__tabbed_2" type="radio" /><div class="tabbed-labels"><label for="__tabbed_2_1">Groovy</label><label for="__tabbed_2_2">Xtend</label><label for="__tabbed_2_3">Java</label><label for="__tabbed_2_4">Kotlin</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="language-groovy highlight"><pre><span></span><code><span id="__span-7-1"><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a><span class="kt">def</span><span class="w"> </span><span class="n">resource</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">BaseQuery</span><span class="o">.</span><span class="na">preloadMetamodel</span><span class="o">(</span><span class="s2">&quot;&lt;path_to_metamodel&gt;&quot;</span><span class="o">)</span>
</span><span id="__span-7-2"><a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a><span class="kt">def</span><span class="w"> </span><span class="n">query</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">BaseQuery</span><span class="o">(</span><span class="n">resource</span><span class="o">.</span><span class="na">contents</span><span class="o">[</span><span class="mi">0</span><span class="o">])</span>
</span><span id="__span-7-3"><a id="__codelineno-7-3" name="__codelineno-7-3" href="#__codelineno-7-3"></a><span class="n">YAMTLGroovyExtensions</span><span class="o">.</span><span class="na">init</span><span class="o">(</span><span class="n">query</span><span class="o">)</span>
</span><span id="__span-7-4"><a id="__codelineno-7-4" name="__codelineno-7-4" href="#__codelineno-7-4"></a><span class="n">query</span><span class="o">.</span><span class="na">selectedExecutionPhases</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ExecutionPhase</span><span class="o">.</span><span class="na">MATCH_ONLY</span>
</span><span id="__span-7-5"><a id="__codelineno-7-5" name="__codelineno-7-5" href="#__codelineno-7-5"></a><span class="n">query</span><span class="o">.</span><span class="na">loadInputModels</span><span class="o">([</span><span class="s2">&quot;&lt;in_domain_name&gt;&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;&lt;path_to_model&gt;&quot;</span><span class="o">])</span>
</span><span id="__span-7-6"><a id="__codelineno-7-6" name="__codelineno-7-6" href="#__codelineno-7-6"></a><span class="n">query</span><span class="o">.</span><span class="na">execute</span><span class="o">()</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="language-xtend highlight"><pre><span></span><code><span id="__span-8-1"><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a><span class="n">val</span><span class="w"> </span><span class="n">resource</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">BaseQuery</span><span class="o">.</span><span class="n">preloadMetamodel</span><span class="o">(</span><span class="s2">&quot;&lt;path_to_metamodel&gt;&quot;</span><span class="o">)</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="n">Resource</span>
</span><span id="__span-8-2"><a id="__codelineno-8-2" name="__codelineno-8-2" href="#__codelineno-8-2"></a><span class="n">val</span><span class="w"> </span><span class="n">query</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">BaseQuery</span><span class="o">(</span><span class="n">resource</span><span class="o">.</span><span class="n">contents</span><span class="o">[</span><span class="mi">0</span><span class="o">]</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="n">EPackage</span><span class="o">)</span>
</span><span id="__span-8-3"><a id="__codelineno-8-3" name="__codelineno-8-3" href="#__codelineno-8-3"></a><span class="n">query</span><span class="o">.</span><span class="n">selectedExecutionPhases</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ExecutionPhase</span><span class="o">.</span><span class="n">MATCH_ONLY</span>
</span><span id="__span-8-4"><a id="__codelineno-8-4" name="__codelineno-8-4" href="#__codelineno-8-4"></a><span class="n">query</span><span class="o">.</span><span class="n">loadInputModels</span><span class="o">(</span><span class="err">#</span><span class="o">[</span><span class="w"> </span><span class="s2">&quot;&lt;in_domain_name&gt;&quot;</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="s2">&quot;&lt;path_to_model&gt;&quot;</span><span class="w"> </span><span class="o">])</span>
</span><span id="__span-8-5"><a id="__codelineno-8-5" name="__codelineno-8-5" href="#__codelineno-8-5"></a><span class="n">query</span><span class="o">.</span><span class="n">execute</span><span class="o">()</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="language-java highlight"><pre><span></span><code><span id="__span-9-1"><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a><span class="n">Resource</span><span class="w"> </span><span class="n">resource</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">Resource</span><span class="p">)</span><span class="w"> </span><span class="n">BaseQuery</span><span class="p">.</span><span class="na">preloadMetamodel</span><span class="p">(</span><span class="s">&quot;&lt;path_to_metamodel&gt;&quot;</span><span class="p">);</span>
</span><span id="__span-9-2"><a id="__codelineno-9-2" name="__codelineno-9-2" href="#__codelineno-9-2"></a><span class="n">BaseQuery</span><span class="w"> </span><span class="n">query</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">BaseQuery</span><span class="p">((</span><span class="n">EPackage</span><span class="p">)</span><span class="w"> </span><span class="n">resource</span><span class="p">.</span><span class="na">getContents</span><span class="p">().</span><span class="na">get</span><span class="p">(</span><span class="mi">0</span><span class="p">));</span>
</span><span id="__span-9-3"><a id="__codelineno-9-3" name="__codelineno-9-3" href="#__codelineno-9-3"></a><span class="n">query</span><span class="p">.</span><span class="na">setSelectedExecutionPhases</span><span class="p">(</span><span class="n">ExecutionPhase</span><span class="p">.</span><span class="na">MATCH_ONLY</span><span class="p">);</span>
</span><span id="__span-9-4"><a id="__codelineno-9-4" name="__codelineno-9-4" href="#__codelineno-9-4"></a><span class="n">query</span><span class="p">.</span><span class="na">loadInputModels</span><span class="p">(</span><span class="n">Collections</span><span class="p">.</span><span class="na">singletonMap</span><span class="p">(</span><span class="s">&quot;&lt;in_domain_name&gt;&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;&lt;path_to_model&gt;&quot;</span><span class="p">));</span>
</span><span id="__span-9-5"><a id="__codelineno-9-5" name="__codelineno-9-5" href="#__codelineno-9-5"></a><span class="n">query</span><span class="p">.</span><span class="na">execute</span><span class="p">();</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="language-kotlin highlight"><pre><span></span><code><span id="__span-10-1"><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a><span class="kd">val</span><span class="w"> </span><span class="nv">resource</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">BaseQuery</span><span class="p">.</span><span class="na">preloadMetamodel</span><span class="p">(</span><span class="s">&quot;&lt;path_to_metamodel&gt;&quot;</span><span class="p">)</span>
</span><span id="__span-10-2"><a id="__codelineno-10-2" name="__codelineno-10-2" href="#__codelineno-10-2"></a><span class="kd">val</span><span class="w"> </span><span class="nv">query</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">BaseQuery</span><span class="p">(</span><span class="n">resource</span><span class="p">.</span><span class="na">contents</span><span class="o">[</span><span class="m">0</span><span class="o">]</span><span class="p">)</span>
</span><span id="__span-10-3"><a id="__codelineno-10-3" name="__codelineno-10-3" href="#__codelineno-10-3"></a><span class="n">query</span><span class="p">.</span><span class="na">selectedExecutionPhases</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ExecutionPhase</span><span class="p">.</span><span class="na">MATCH_ONLY</span>
</span><span id="__span-10-4"><a id="__codelineno-10-4" name="__codelineno-10-4" href="#__codelineno-10-4"></a><span class="n">query</span><span class="p">.</span><span class="na">loadInputModels</span><span class="p">(</span><span class="n">mapOf</span><span class="p">(</span><span class="s">&quot;&lt;in_domain_name&gt;&quot;</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="s">&quot;&lt;path_to_model&gt;&quot;</span><span class="p">))</span>
</span><span id="__span-10-5"><a id="__codelineno-10-5" name="__codelineno-10-5" href="#__codelineno-10-5"></a><span class="n">query</span><span class="p">.</span><span class="na">execute</span><span class="p">()</span>
</span></code></pre></div>
</div>
</div>
</div>
<p>When using dynamic EMF for accessing metamodel metadata (i.e., EMF code has not been generated for the metamodel), use the static method <code>YAMTLModule::loadMetamodel("&lt;path_to_metamodel&gt;")</code>, which works with both Ecore files (<code>.ecore</code>) and with <a href="https://eclipse.dev/emfatic/">EMFatic</a> files (<code>.emf</code>) to load the metamodel. Then instantiate the YAMTL module containing the model query, configure it to execute only the matching phase, load the input models and, finally, execute the query using the method <code>YAMTLModule::execute()</code>. </p>
<p>The results of the queries can be handled in blocks <code>endWith(&lt;ACTION)</code> of query rules, for example printing them in the output console or accumulating them in local variables.</p>
<h3 id="out-place-transformation-semantics">Out-place Transformation Semantics</h3>
<p>YAMTL modules are typically used to specify model-to-model transformations, where the objects of an input model are mapped to objects of an output model that is created <strong>from scratch</strong>. This is commonly referred to as out-place transformation because the input model is read-only and not modified.</p>
<p>This semantics is characterized by the following properties:</p>
<ul>
<li><strong>Immutability of Source Models</strong>: The input model remains immutable during the transformation process. Consequently, a new output model is generated to encapsulate the transformation result, thereby preserving the integrity of the original input model. This immutability eliminates the risk of unintended side effects that could potentially alter the source model in undesirable ways.</li>
<li><strong>Separation of Concerns</strong>: Out-of-place transformations naturally enable a clear separation of concerns between the input and output models. This is beneficial for modularisation and reusability of transformation rules, as each rule can be designed to perform a specific, self-contained task without affecting the input model.</li>
<li><strong>Traceability and Versioning</strong>: The creation of a separate output model in out-of-place transformations provides better support for traceability and versioning. Each transformation produces a new model that can be stored, compared, and traced back to its originating source model. This facilitates debugging, testing, and long-term maintenance. This feature also enables the <strong>incremental execution</strong> of model transformations based on change propagation from the input model to the output model.</li>
</ul>
<p>Side effects in a model transformation are specified in the <code>out</code> elements of rules. For each transformation rule that has been matched, the rule is applied by creating an object in the output model for each <code>out</code> element and the object is initialized using the corresponding <code>&lt;ACTION&gt;</code> expression. Within a rule, an <code>ACTION</code> expression can refer to:</p>
<ul>
<li>the input object variables (either matched or derived) of that rule, </li>
<li><code>using</code> variables of that rule, and </li>
<li>all output object variables of that rule.</li>
</ul>
<p>To configure and execute a YAMTL module for implementing an out-place transformation, use the following template:</p>
<div class="tabbed-set tabbed-alternate" data-tabs="3:4"><input checked="checked" id="__tabbed_3_1" name="__tabbed_3" type="radio" /><input id="__tabbed_3_2" name="__tabbed_3" type="radio" /><input id="__tabbed_3_3" name="__tabbed_3" type="radio" /><input id="__tabbed_3_4" name="__tabbed_3" type="radio" /><div class="tabbed-labels"><label for="__tabbed_3_1">Groovy</label><label for="__tabbed_3_2">Xtend</label><label for="__tabbed_3_3">Java</label><label for="__tabbed_3_4">Kotlin</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="language-groovy highlight"><pre><span></span><code><span id="__span-11-1"><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a><span class="kt">def</span><span class="w"> </span><span class="n">resource</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">YAMTLModule</span><span class="o">.</span><span class="na">preloadMetamodel</span><span class="o">(</span><span class="s2">&quot;&lt;path_to_metamodel&gt;&quot;</span><span class="o">)</span>
</span><span id="__span-11-2"><a id="__codelineno-11-2" name="__codelineno-11-2" href="#__codelineno-11-2"></a><span class="kt">def</span><span class="w"> </span><span class="n">xform</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">XForm</span><span class="o">(</span><span class="n">resource</span><span class="o">.</span><span class="na">contents</span><span class="o">[</span><span class="mi">0</span><span class="o">])</span>
</span><span id="__span-11-3"><a id="__codelineno-11-3" name="__codelineno-11-3" href="#__codelineno-11-3"></a><span class="n">YAMTLGroovyExtensions</span><span class="o">.</span><span class="na">init</span><span class="o">(</span><span class="n">xform</span><span class="o">)</span>
</span><span id="__span-11-4"><a id="__codelineno-11-4" name="__codelineno-11-4" href="#__codelineno-11-4"></a><span class="n">xform</span><span class="o">.</span><span class="na">loadInputModels</span><span class="o">([</span><span class="s2">&quot;&lt;in_domain_name&gt;&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;&lt;path_to_model&gt;&quot;</span><span class="o">])</span>
</span><span id="__span-11-5"><a id="__codelineno-11-5" name="__codelineno-11-5" href="#__codelineno-11-5"></a><span class="n">xform</span><span class="o">.</span><span class="na">execute</span><span class="o">()</span>
</span><span id="__span-11-6"><a id="__codelineno-11-6" name="__codelineno-11-6" href="#__codelineno-11-6"></a><span class="n">xform</span><span class="o">.</span><span class="na">saveOutputModels</span><span class="o">([</span><span class="s2">&quot;&lt;out_domain_name&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;&lt;path_to_model&gt;&quot;</span><span class="o">])</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="language-xtend highlight"><pre><span></span><code><span id="__span-12-1"><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a><span class="n">val</span><span class="w"> </span><span class="n">resource</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">YAMTLModule</span><span class="o">.</span><span class="n">preloadMetamodel</span><span class="o">(</span><span class="s2">&quot;&lt;path_to_metamodel&gt;&quot;</span><span class="o">)</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="n">Resource</span>
</span><span id="__span-12-2"><a id="__codelineno-12-2" name="__codelineno-12-2" href="#__codelineno-12-2"></a><span class="n">val</span><span class="w"> </span><span class="n">xform</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">XForm</span><span class="o">(</span><span class="n">resource</span><span class="o">.</span><span class="n">contents</span><span class="o">[</span><span class="mi">0</span><span class="o">]</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="n">EPackage</span><span class="o">)</span>
</span><span id="__span-12-3"><a id="__codelineno-12-3" name="__codelineno-12-3" href="#__codelineno-12-3"></a><span class="n">xform</span><span class="o">.</span><span class="n">loadInputModels</span><span class="o">(</span><span class="err">#</span><span class="o">[</span><span class="w"> </span><span class="s2">&quot;&lt;in_domain_name&gt;&quot;</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="s2">&quot;&lt;path_to_model&gt;&quot;</span><span class="w"> </span><span class="o">])</span>
</span><span id="__span-12-4"><a id="__codelineno-12-4" name="__codelineno-12-4" href="#__codelineno-12-4"></a><span class="n">xform</span><span class="o">.</span><span class="n">execute</span><span class="o">()</span>
</span><span id="__span-12-5"><a id="__codelineno-12-5" name="__codelineno-12-5" href="#__codelineno-12-5"></a><span class="n">xform</span><span class="o">.</span><span class="n">saveOutputModels</span><span class="o">(</span><span class="err">#</span><span class="o">[</span><span class="w"> </span><span class="s2">&quot;&lt;out_domain_name&gt;&quot;</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="s2">&quot;&lt;path_to_model&gt;&quot;</span><span class="w"> </span><span class="o">])</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="language-java highlight"><pre><span></span><code><span id="__span-13-1"><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a><span class="n">Resource</span><span class="w"> </span><span class="n">resource</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">Resource</span><span class="p">)</span><span class="w"> </span><span class="n">YAMTLModule</span><span class="p">.</span><span class="na">preloadMetamodel</span><span class="p">(</span><span class="s">&quot;&lt;path_to_metamodel&gt;&quot;</span><span class="p">);</span>
</span><span id="__span-13-2"><a id="__codelineno-13-2" name="__codelineno-13-2" href="#__codelineno-13-2"></a><span class="n">XForm</span><span class="w"> </span><span class="n">xform</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">XForm</span><span class="p">((</span><span class="n">EPackage</span><span class="p">)</span><span class="n">resource</span><span class="p">.</span><span class="na">getContents</span><span class="p">().</span><span class="na">get</span><span class="p">(</span><span class="mi">0</span><span class="p">));</span>
</span><span id="__span-13-3"><a id="__codelineno-13-3" name="__codelineno-13-3" href="#__codelineno-13-3"></a><span class="n">xform</span><span class="p">.</span><span class="na">loadInputModels</span><span class="p">(</span><span class="n">Collections</span><span class="p">.</span><span class="na">singletonMap</span><span class="p">(</span><span class="s">&quot;&lt;in_domain_name&gt;&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;&lt;path_to_model&gt;&quot;</span><span class="p">));</span>
</span><span id="__span-13-4"><a id="__codelineno-13-4" name="__codelineno-13-4" href="#__codelineno-13-4"></a><span class="n">xform</span><span class="p">.</span><span class="na">execute</span><span class="p">();</span>
</span><span id="__span-13-5"><a id="__codelineno-13-5" name="__codelineno-13-5" href="#__codelineno-13-5"></a><span class="n">xform</span><span class="p">.</span><span class="na">saveOutputModels</span><span class="p">(</span><span class="n">Collections</span><span class="p">.</span><span class="na">singletonMap</span><span class="p">(</span><span class="s">&quot;&lt;out_domain_name&gt;&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;&lt;path_to_model&gt;&quot;</span><span class="p">));</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="language-kotlin highlight"><pre><span></span><code><span id="__span-14-1"><a id="__codelineno-14-1" name="__codelineno-14-1" href="#__codelineno-14-1"></a><span class="kd">val</span><span class="w"> </span><span class="nv">resource</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">YAMTLModule</span><span class="p">.</span><span class="na">preloadMetamodel</span><span class="p">(</span><span class="s">&quot;&lt;path_to_metamodel&gt;&quot;</span><span class="p">)</span>
</span><span id="__span-14-2"><a id="__codelineno-14-2" name="__codelineno-14-2" href="#__codelineno-14-2"></a><span class="kd">val</span><span class="w"> </span><span class="nv">xform</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">XForm</span><span class="p">(</span><span class="n">resource</span><span class="p">.</span><span class="na">contents</span><span class="o">[</span><span class="m">0</span><span class="o">]</span><span class="p">)</span>
</span><span id="__span-14-3"><a id="__codelineno-14-3" name="__codelineno-14-3" href="#__codelineno-14-3"></a><span class="n">xform</span><span class="p">.</span><span class="na">loadInputModels</span><span class="p">(</span><span class="n">mapOf</span><span class="p">(</span><span class="s">&quot;&lt;in_domain_name&gt;&quot;</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="s">&quot;&lt;path_to_model&gt;&quot;</span><span class="p">))</span>
</span><span id="__span-14-4"><a id="__codelineno-14-4" name="__codelineno-14-4" href="#__codelineno-14-4"></a><span class="n">xform</span><span class="p">.</span><span class="na">execute</span><span class="p">()</span>
</span><span id="__span-14-5"><a id="__codelineno-14-5" name="__codelineno-14-5" href="#__codelineno-14-5"></a><span class="n">xform</span><span class="p">.</span><span class="na">saveOutputModels</span><span class="p">(</span><span class="n">mapOf</span><span class="p">(</span><span class="s">&quot;&lt;out_domain_name&gt;&quot;</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="s">&quot;&lt;path_to_model&gt;&quot;</span><span class="p">))</span>
</span></code></pre></div>
</div>
</div>
</div>
<p>When an expression needs to reference output objects that are initialized by other rules, the operation <code>YAMTLModule::fetch()</code> needs to be used. The primary purpose of the <code>fetch</code> operation is to retrieve output objects corresponding to a given input object through the application of a transformation rule. The simplest version is suitable for matched rules that have a single object pattern in both the input and output patterns: <code>fetch(input_matched_object)</code> will return the output object created by the rule that matched <code>input_matched_object</code>.</p>
<div class="admonition tip">
<p class="admonition-title">Using Actions Effectively</p>
<p>In a rule with an output element <code>.out(&lt;out_object_name&gt;, &lt;out_object_type&gt;, &lt;ACTION&gt;)</code>, the expression <code>&lt;ACTION&gt;</code> should only be used to initialize the output object of type <code>&lt;out_object_type&gt;</code> that is created by this output element.</p>
</div>
<div class="admonition tip">
<p class="admonition-title">Creation of Objects</p>
<p>YAMTL augments mainstream JVM programming languages with declarative model transformation capabilities, yet imperative features of the host languages can still be used.
Declarative object creation is normally handled in <code>out</code> elements in the output pattern of a rule, when an output element is defined with a new name it creates a new instance of the initialized object. </p>
<p>Using imperative features, ad-hoc objects that are manually created using an object factory and assigned to an output element in the <code>ACTION</code> expression, are not traced by YAMTL. This means such non-traced objects cannot be fetched from another rule using the operation <code>fetch()</code>.</p>
</div>
<h3 id="in-place-semantics">In-place Semantics</h3>
<div class="admonition warning">
<p class="admonition-title">This semantics is experimental.</p>
</div>
<p>An in-place transformation in YAMTL is a model transformation where the model is modified directly to produce the desired output model, without creating a new or separate model as the output. In other words, the transformation process occurs within the same model instance, and the original model is incrementally updated to match the structure and content specified by the transformation rules.</p>
<p>This approach has several implications and characteristics:</p>
<ul>
<li><strong>Mutability of Source Models</strong>: In in-place transformations, the input model is mutable, meaning that its elements can be modified during the transformation process. This is in contrast to out-of-place transformations, where a new model is created as the output, leaving the input model unchanged.</li>
<li><strong>Efficiency</strong>: In-place transformations can be more efficient in terms of memory usage and execution time compared to out-of-place transformations, especially when dealing with large models. This efficiency is due to the avoidance of duplicating the entire input model structure in the output model. </li>
<li><strong>Potential Side Effects</strong>: Since the input model is modified directly, it is essential to carefully manage and control potential side effects. Changes made during the transformation might affect the application of transformation rules or introduce inconsistencies if not handled correctly.</li>
</ul>
<p>When declaring an in-place transformation, the header of the module containing the in-place transformation rules must identify the parameter that refers to the model to be modified in-place using the keyword <code>inOut</code>: <code>header().inOut(&lt;inOut_domain_name&gt;,&lt;pk&gt;)</code>.</p>
<p>YAMTL in-place transformations can be both additive and subtractive:</p>
<ul>
<li>To create new objects, use <code>out</code> elements in rule output patterns that <strong>do not</strong> correspond to an <code>in</code> domain, or any of its parent rules.</li>
<li>To update existing objects, use <code>out</code> elements in rule output patterns that <strong>do</strong> correspond to an <code>in</code> domain of the same rule, or any of its parent rules.</li>
<li>To delete objects that exist in the model, use <code>.drop()</code> on the corresponding <code>out</code> element that refers to an <code>in</code> element. The <code>in</code> element must be matched by the rule in order for it to be deleted. When using <code>.drop()</code> the following flag must be disabled for the module <code>xform.enableUpdateExtent(false)</code>, where <code>xform</code> refers to the YAMTLModule instance that declares the model transformation rules. <code>drop()</code> has delete cascade semantics that indicates both the object and its contents following containment references are removed. When an object is deleted from the model, all the objects contained through containment references in it will also be removed.</li>
<li>YAMTL also offers a less dramatic option to avoid deleting objects from the model by <strong>freezing</strong> parts of the model. An object in the model is said to be frozen when YAMTL's pattern matcher is oblivious to it. 
Objects can be frozen/unfrozen using the operations <code>.freeze()</code>/<code>.unfreeze()</code> on <code>inOut</code> elements, i.e. to those <code>out</code> elements whose name and type coincides with an <code>in</code> element. When using  <code>.freeze()</code>/<code>.unfreeze()</code> the following flag must be disabled for the module <code>xform.enableUpdateExtent(false)</code>, where <code>xform</code> refers to the YAMTLModule instance that declares the model transformation rules. </li>
</ul>
<p>Since rules are applied over a model in-place, the side-effect of a rule application may enable additional rules and the pattern matching process needs to be performed iteratively. YAMTL provides two strategies to evaluate rules:</p>
<ul>
<li><strong>Single-Match Mode</strong>: As soon as the pattern matcher finds a match, the associated rule is executed. This mode is enabled with the flag <code>xform.setWithStagedExecution(false)</code>, where <code>xform</code> is the <code>YAMTLModule</code> instance containing the declaration of transformation rules. In case of non-terminating transformations, the number of transformation steps can be limited by setting a cap using <code>YAMTLModule::setTransitionUpperBound(Long)</code>, which by default is set to <code>Long.MAX_VALUE</code>.</li>
<li><strong>Staged Mode</strong>: Rules are evaluated in stages, where each stage involves identifying all applicable matches prior to rule execution. This evaluation mode is similar to the evaluation strategy used in out-place transformations. The difference is that the transformation may consist of different stages. This mode is enabled with the flag <code>xform.setWithStagedExecution(true)</code>, where <code>xform</code> is the <code>YAMTLModule</code> instance containing the declaration of transformation rules. The number of stages that are perfomed can also be capped using <code>YAMTLModule::setStageUpperBound(Long)</code>, which by default is set to <code>1</code>.</li>
</ul>
<p>To configure and execute a YAMTL module for implementing an in-place transformation, use the following template:</p>
<div class="tabbed-set tabbed-alternate" data-tabs="4:4"><input checked="checked" id="__tabbed_4_1" name="__tabbed_4" type="radio" /><input id="__tabbed_4_2" name="__tabbed_4" type="radio" /><input id="__tabbed_4_3" name="__tabbed_4" type="radio" /><input id="__tabbed_4_4" name="__tabbed_4" type="radio" /><div class="tabbed-labels"><label for="__tabbed_4_1">Groovy</label><label for="__tabbed_4_2">Xtend</label><label for="__tabbed_4_3">Java</label><label for="__tabbed_4_4">Kotlin</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="language-groovy highlight"><pre><span></span><code><span id="__span-15-1"><a id="__codelineno-15-1" name="__codelineno-15-1" href="#__codelineno-15-1"></a><span class="kt">def</span><span class="w"> </span><span class="n">resource</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">YAMTLModule</span><span class="o">.</span><span class="na">preloadMetamodel</span><span class="o">(</span><span class="s2">&quot;&lt;path_to_metamodel&gt;&quot;</span><span class="o">)</span>
</span><span id="__span-15-2"><a id="__codelineno-15-2" name="__codelineno-15-2" href="#__codelineno-15-2"></a><span class="kt">def</span><span class="w"> </span><span class="n">xform</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">XForm</span><span class="o">(</span><span class="n">resource</span><span class="o">.</span><span class="na">contents</span><span class="o">[</span><span class="mi">0</span><span class="o">])</span>
</span><span id="__span-15-3"><a id="__codelineno-15-3" name="__codelineno-15-3" href="#__codelineno-15-3"></a><span class="n">YAMTLGroovyExtensions</span><span class="o">.</span><span class="na">init</span><span class="o">(</span><span class="n">xform</span><span class="o">)</span>
</span><span id="__span-15-4"><a id="__codelineno-15-4" name="__codelineno-15-4" href="#__codelineno-15-4"></a><span class="n">xform</span><span class="o">.</span><span class="na">setInplace</span><span class="o">(</span><span class="kc">true</span><span class="o">)</span><span class="w"> </span><span class="c1">// enables the in-place transformation semantics</span>
</span><span id="__span-15-5"><a id="__codelineno-15-5" name="__codelineno-15-5" href="#__codelineno-15-5"></a><span class="n">xform</span><span class="o">.</span><span class="na">setWithStagedExecution</span><span class="o">(</span><span class="kc">false</span><span class="o">)</span><span class="w"> </span><span class="c1">// YAMTL to use one match at a time</span>
</span><span id="__span-15-6"><a id="__codelineno-15-6" name="__codelineno-15-6" href="#__codelineno-15-6"></a><span class="n">xform</span><span class="o">.</span><span class="na">enableUpdateExtent</span><span class="o">(</span><span class="kc">false</span><span class="o">)</span><span class="w"> </span><span class="c1">// to be used with drop() and freeze()/unfreeze()</span>
</span><span id="__span-15-7"><a id="__codelineno-15-7" name="__codelineno-15-7" href="#__codelineno-15-7"></a>
</span><span id="__span-15-8"><a id="__codelineno-15-8" name="__codelineno-15-8" href="#__codelineno-15-8"></a><span class="n">xform</span><span class="o">.</span><span class="na">loadInputModels</span><span class="o">([</span><span class="s2">&quot;&lt;in_domain_name&gt;&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;&lt;path_to_model&gt;&quot;</span><span class="o">])</span>
</span><span id="__span-15-9"><a id="__codelineno-15-9" name="__codelineno-15-9" href="#__codelineno-15-9"></a><span class="n">xform</span><span class="o">.</span><span class="na">execute</span><span class="o">()</span>
</span><span id="__span-15-10"><a id="__codelineno-15-10" name="__codelineno-15-10" href="#__codelineno-15-10"></a><span class="n">xform</span><span class="o">.</span><span class="na">saveOutputModels</span><span class="o">([</span><span class="s2">&quot;&lt;out_domain_name&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;&lt;path_to_model&gt;&quot;</span><span class="o">])</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="language-xtend highlight"><pre><span></span><code><span id="__span-16-1"><a id="__codelineno-16-1" name="__codelineno-16-1" href="#__codelineno-16-1"></a><span class="n">val</span><span class="w"> </span><span class="n">resource</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">YAMTLModule</span><span class="o">.</span><span class="n">preloadMetamodel</span><span class="o">(</span><span class="s2">&quot;&lt;path_to_metamodel&gt;&quot;</span><span class="o">)</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="n">Resource</span>
</span><span id="__span-16-2"><a id="__codelineno-16-2" name="__codelineno-16-2" href="#__codelineno-16-2"></a><span class="n">val</span><span class="w"> </span><span class="n">xform</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">XForm</span><span class="o">(</span><span class="n">resource</span><span class="o">.</span><span class="n">contents</span><span class="o">[</span><span class="mi">0</span><span class="o">]</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="n">EPackage</span><span class="o">)</span>
</span><span id="__span-16-3"><a id="__codelineno-16-3" name="__codelineno-16-3" href="#__codelineno-16-3"></a><span class="n">xform</span><span class="o">.</span><span class="n">setInplace</span><span class="o">(</span><span class="kc">true</span><span class="o">)</span><span class="w"> </span><span class="c1">// enables the in-place transformation semantics</span>
</span><span id="__span-16-4"><a id="__codelineno-16-4" name="__codelineno-16-4" href="#__codelineno-16-4"></a><span class="n">xform</span><span class="o">.</span><span class="n">setWithStagedExecution</span><span class="o">(</span><span class="kc">false</span><span class="o">)</span><span class="w"> </span><span class="c1">// YAMTL to use one match at a time</span>
</span><span id="__span-16-5"><a id="__codelineno-16-5" name="__codelineno-16-5" href="#__codelineno-16-5"></a><span class="n">xform</span><span class="o">.</span><span class="n">enableUpdateExtent</span><span class="o">(</span><span class="kc">false</span><span class="o">)</span><span class="w"> </span><span class="c1">// to be used with drop() and freeze()/unfreeze()</span>
</span><span id="__span-16-6"><a id="__codelineno-16-6" name="__codelineno-16-6" href="#__codelineno-16-6"></a>
</span><span id="__span-16-7"><a id="__codelineno-16-7" name="__codelineno-16-7" href="#__codelineno-16-7"></a><span class="n">xform</span><span class="o">.</span><span class="n">loadInputModels</span><span class="o">(</span><span class="err">#</span><span class="o">[</span><span class="w"> </span><span class="s2">&quot;&lt;in_domain_name&gt;&quot;</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="s2">&quot;&lt;path_to_model&gt;&quot;</span><span class="w"> </span><span class="o">])</span>
</span><span id="__span-16-8"><a id="__codelineno-16-8" name="__codelineno-16-8" href="#__codelineno-16-8"></a><span class="n">xform</span><span class="o">.</span><span class="n">execute</span><span class="o">()</span>
</span><span id="__span-16-9"><a id="__codelineno-16-9" name="__codelineno-16-9" href="#__codelineno-16-9"></a><span class="n">xform</span><span class="o">.</span><span class="n">saveOutputModels</span><span class="o">(</span><span class="err">#</span><span class="o">[</span><span class="w"> </span><span class="s2">&quot;&lt;out_domain_name&gt;&quot;</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="s2">&quot;&lt;path_to_model&gt;&quot;</span><span class="w"> </span><span class="o">])</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="language-java highlight"><pre><span></span><code><span id="__span-17-1"><a id="__codelineno-17-1" name="__codelineno-17-1" href="#__codelineno-17-1"></a><span class="n">Resource</span><span class="w"> </span><span class="n">resource</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">Resource</span><span class="p">)</span><span class="w"> </span><span class="n">YAMTLModule</span><span class="p">.</span><span class="na">preloadMetamodel</span><span class="p">(</span><span class="s">&quot;&lt;path_to_metamodel&gt;&quot;</span><span class="p">);</span>
</span><span id="__span-17-2"><a id="__codelineno-17-2" name="__codelineno-17-2" href="#__codelineno-17-2"></a><span class="n">XForm</span><span class="w"> </span><span class="n">xform</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">XForm</span><span class="p">((</span><span class="n">EPackage</span><span class="p">)</span><span class="n">resource</span><span class="p">.</span><span class="na">getContents</span><span class="p">().</span><span class="na">get</span><span class="p">(</span><span class="mi">0</span><span class="p">));</span>
</span><span id="__span-17-3"><a id="__codelineno-17-3" name="__codelineno-17-3" href="#__codelineno-17-3"></a><span class="n">xform</span><span class="p">.</span><span class="na">setInplace</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span><span class="w"> </span><span class="c1">// enables the in-place transformation semantics</span>
</span><span id="__span-17-4"><a id="__codelineno-17-4" name="__codelineno-17-4" href="#__codelineno-17-4"></a><span class="n">xform</span><span class="p">.</span><span class="na">setWithStagedExecution</span><span class="p">(</span><span class="kc">false</span><span class="p">);</span><span class="w"> </span><span class="c1">// YAMTL to use one match at a time</span>
</span><span id="__span-17-5"><a id="__codelineno-17-5" name="__codelineno-17-5" href="#__codelineno-17-5"></a><span class="n">xform</span><span class="p">.</span><span class="na">enableUpdateExtent</span><span class="p">(</span><span class="kc">false</span><span class="p">);</span><span class="w"> </span><span class="c1">// to be used with drop() and freeze()/unfreeze()</span>
</span><span id="__span-17-6"><a id="__codelineno-17-6" name="__codelineno-17-6" href="#__codelineno-17-6"></a>
</span><span id="__span-17-7"><a id="__codelineno-17-7" name="__codelineno-17-7" href="#__codelineno-17-7"></a><span class="n">xform</span><span class="p">.</span><span class="na">loadInputModels</span><span class="p">(</span><span class="n">Collections</span><span class="p">.</span><span class="na">singletonMap</span><span class="p">(</span><span class="s">&quot;&lt;in_domain_name&gt;&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;&lt;path_to_model&gt;&quot;</span><span class="p">));</span>
</span><span id="__span-17-8"><a id="__codelineno-17-8" name="__codelineno-17-8" href="#__codelineno-17-8"></a><span class="n">xform</span><span class="p">.</span><span class="na">execute</span><span class="p">();</span>
</span><span id="__span-17-9"><a id="__codelineno-17-9" name="__codelineno-17-9" href="#__codelineno-17-9"></a><span class="n">xform</span><span class="p">.</span><span class="na">saveOutputModels</span><span class="p">(</span><span class="n">Collections</span><span class="p">.</span><span class="na">singletonMap</span><span class="p">(</span><span class="s">&quot;&lt;out_domain_name&gt;&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;&lt;path_to_model&gt;&quot;</span><span class="p">));</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="language-kotlin highlight"><pre><span></span><code><span id="__span-18-1"><a id="__codelineno-18-1" name="__codelineno-18-1" href="#__codelineno-18-1"></a><span class="kd">val</span><span class="w"> </span><span class="nv">resource</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">YAMTLModule</span><span class="p">.</span><span class="na">preloadMetamodel</span><span class="p">(</span><span class="s">&quot;&lt;path_to_metamodel&gt;&quot;</span><span class="p">)</span>
</span><span id="__span-18-2"><a id="__codelineno-18-2" name="__codelineno-18-2" href="#__codelineno-18-2"></a><span class="kd">val</span><span class="w"> </span><span class="nv">xform</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">XForm</span><span class="p">(</span><span class="n">resource</span><span class="p">.</span><span class="na">contents</span><span class="o">[</span><span class="m">0</span><span class="o">]</span><span class="p">)</span>
</span><span id="__span-18-3"><a id="__codelineno-18-3" name="__codelineno-18-3" href="#__codelineno-18-3"></a><span class="n">xform</span><span class="p">.</span><span class="na">setInplace</span><span class="p">(</span><span class="kc">true</span><span class="p">)</span><span class="w"> </span><span class="c1">// enables the in-place transformation semantics</span>
</span><span id="__span-18-4"><a id="__codelineno-18-4" name="__codelineno-18-4" href="#__codelineno-18-4"></a><span class="n">xform</span><span class="p">.</span><span class="na">setWithStagedExecution</span><span class="p">(</span><span class="kc">false</span><span class="p">)</span><span class="w"> </span><span class="c1">// YAMTL to use one match at a time</span>
</span><span id="__span-18-5"><a id="__codelineno-18-5" name="__codelineno-18-5" href="#__codelineno-18-5"></a><span class="n">xform</span><span class="p">.</span><span class="na">enableUpdateExtent</span><span class="p">(</span><span class="kc">false</span><span class="p">)</span><span class="w"> </span><span class="c1">// to be used with drop() and freeze()/unfreeze()</span>
</span><span id="__span-18-6"><a id="__codelineno-18-6" name="__codelineno-18-6" href="#__codelineno-18-6"></a>
</span><span id="__span-18-7"><a id="__codelineno-18-7" name="__codelineno-18-7" href="#__codelineno-18-7"></a><span class="n">xform</span><span class="p">.</span><span class="na">loadInputModels</span><span class="p">(</span><span class="n">mapOf</span><span class="p">(</span><span class="s">&quot;&lt;in_domain_name&gt;&quot;</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="s">&quot;&lt;path_to_model&gt;&quot;</span><span class="p">))</span>
</span><span id="__span-18-8"><a id="__codelineno-18-8" name="__codelineno-18-8" href="#__codelineno-18-8"></a><span class="n">xform</span><span class="p">.</span><span class="na">execute</span><span class="p">()</span>
</span><span id="__span-18-9"><a id="__codelineno-18-9" name="__codelineno-18-9" href="#__codelineno-18-9"></a><span class="n">xform</span><span class="p">.</span><span class="na">saveOutputModels</span><span class="p">(</span><span class="n">mapOf</span><span class="p">(</span><span class="s">&quot;&lt;out_domain_name&gt;&quot;</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="s">&quot;&lt;path_to_model&gt;&quot;</span><span class="p">))</span>
</span></code></pre></div>
</div>
</div>
</div>
<div class="admonition info">
<p class="admonition-title">In-place semantics and fetch()</p>
<p>The mapping from input match to output match is traced as a transformation step in the out-place semantics only. In the in-place semantics, transformation steps are not traced and the <code>fetch()</code> operation cannot be used to resolve references to output objects from input objects (or the matches that contain them). The reason is that the transformation executes modifications on the input model, and references to objects in that model are reachable and need not be resolved using <code>fetch()</code>.</p>
</div>
<h2 id="yamtl-rules">YAMTL Rules</h2>
<p>YAMTL is as expressive as ATL so it also has a lot of optional operations. These options provide a more thorough (full) syntax for the language.</p>
<div class="language-yamtl-groovy highlight"><pre><span></span><code><span id="__span-19-1"><a id="__codelineno-19-1" name="__codelineno-19-1" href="#__codelineno-19-1"></a><span class="n">rule</span><span class="o">(</span><span class="s">&quot;&lt;name&gt;&quot;</span><span class="o">)</span>
</span><span id="__span-19-2"><a id="__codelineno-19-2" name="__codelineno-19-2" href="#__codelineno-19-2"></a><span class="w">    </span><span class="o">[.</span><span class="na">inheritsFrom</span><span class="o">(&lt;</span><span class="n">ruleNameList</span><span class="o">&gt;)]?</span><span class="w"> </span>
</span><span id="__span-19-3"><a id="__codelineno-19-3" name="__codelineno-19-3" href="#__codelineno-19-3"></a><span class="w">    </span><span class="o">[.</span><span class="na">isAbstract</span><span class="o">()]?</span><span class="w"> </span>
</span><span id="__span-19-4"><a id="__codelineno-19-4" name="__codelineno-19-4" href="#__codelineno-19-4"></a><span class="w">    </span><span class="o">[.</span><span class="na">isLazy</span><span class="o">()</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="o">.</span><span class="na">isUniqueLazy</span><span class="o">()]?</span><span class="w"> </span>
</span><span id="__span-19-5"><a id="__codelineno-19-5" name="__codelineno-19-5" href="#__codelineno-19-5"></a><span class="w">    </span><span class="o">[.</span><span class="na">isTransient</span><span class="o">()]?</span>
</span><span id="__span-19-6"><a id="__codelineno-19-6" name="__codelineno-19-6" href="#__codelineno-19-6"></a><span class="w">    </span><span class="o">{</span>
</span><span id="__span-19-7"><a id="__codelineno-19-7" name="__codelineno-19-7" href="#__codelineno-19-7"></a><span class="w">        </span><span class="o">.</span><span class="cp">in</span><span class="o">(</span><span class="s">&quot;&lt;in_object_name&gt;&quot;</span><span class="o">,</span><span class="w"> </span><span class="o">&lt;</span><span class="n">in_object_type</span><span class="o">&gt;)</span>
</span><span id="__span-19-8"><a id="__codelineno-19-8" name="__codelineno-19-8" href="#__codelineno-19-8"></a><span class="w">        </span><span class="o">[(.</span><span class="na">filter</span><span class="o">(&lt;</span><span class="n">FILTER</span><span class="o">&gt;)</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="o">.</span><span class="na">derivedWith</span><span class="o">(&lt;</span><span class="n">QUERY</span><span class="o">&gt;))]?</span>
</span><span id="__span-19-9"><a id="__codelineno-19-9" name="__codelineno-19-9" href="#__codelineno-19-9"></a><span class="w">    </span><span class="o">}+</span>
</span><span id="__span-19-10"><a id="__codelineno-19-10" name="__codelineno-19-10" href="#__codelineno-19-10"></a><span class="w">    </span><span class="o">[.</span><span class="na">using</span><span class="o">(</span><span class="s">&quot;&lt;var_name&gt;&quot;</span><span class="o">,</span><span class="w"> </span><span class="o">&lt;</span><span class="n">QUERY</span><span class="o">&gt;)]*</span>
</span><span id="__span-19-11"><a id="__codelineno-19-11" name="__codelineno-19-11" href="#__codelineno-19-11"></a><span class="w">    </span><span class="o">[.</span><span class="na">globalFilter</span><span class="o">(&lt;</span><span class="n">FILTER</span><span class="o">&gt;)]?</span>
</span><span id="__span-19-12"><a id="__codelineno-19-12" name="__codelineno-19-12" href="#__codelineno-19-12"></a><span class="w">    </span><span class="o">{</span>
</span><span id="__span-19-13"><a id="__codelineno-19-13" name="__codelineno-19-13" href="#__codelineno-19-13"></a><span class="w">        </span><span class="o">.</span><span class="cp">out</span><span class="o">(</span><span class="s">&quot;&lt;out_object_name&gt;&quot;</span><span class="o">,</span><span class="w"> </span><span class="o">&lt;</span><span class="n">out_object_type</span><span class="o">&gt;,</span><span class="w"> </span><span class="o">&lt;</span><span class="n">ACTION</span><span class="o">&gt;)</span>
</span><span id="__span-19-14"><a id="__codelineno-19-14" name="__codelineno-19-14" href="#__codelineno-19-14"></a><span class="w">        </span><span class="o">[.</span><span class="na">overriding</span><span class="o">()]?</span>
</span><span id="__span-19-15"><a id="__codelineno-19-15" name="__codelineno-19-15" href="#__codelineno-19-15"></a><span class="w">        </span><span class="o">[.</span><span class="na">drop</span><span class="o">()|.</span><span class="na">freeze</span><span class="o">()|.</span><span class="na">unfreeze</span><span class="o">()]?</span>
</span><span id="__span-19-16"><a id="__codelineno-19-16" name="__codelineno-19-16" href="#__codelineno-19-16"></a><span class="w">    </span><span class="o">}+</span>
</span><span id="__span-19-17"><a id="__codelineno-19-17" name="__codelineno-19-17" href="#__codelineno-19-17"></a><span class="w">    </span><span class="o">[.</span><span class="na">endWith</span><span class="o">(&lt;</span><span class="n">ACTION</span><span class="o">&gt;)]?</span>
</span><span id="__span-19-18"><a id="__codelineno-19-18" name="__codelineno-19-18" href="#__codelineno-19-18"></a><span class="w">    </span><span class="o">[.</span><span class="na">priority</span><span class="o">(</span><span class="n">P</span><span class="o">)]?</span>
</span></code></pre></div>
<div class="admonition info">
<p class="admonition-title">Legend</p>
<p><code>&lt;&gt;</code> indicates user-definable expressions, <code>[]?</code> means optional, <code>[]*</code> means operation can occur 0 or more times, <code>{}+</code> means operation can occur 1 or more times. These symbols are not part of the actual YAMTL syntax.</p>
</div>
<p>YAMTL has two types of input elements: <strong>matched</strong> and <strong>derived</strong>. Matched elements are initialized using YAMTL's matching algorithm, whereas derived elements are initialized using a contextual query and are dependent on at least one matched element. Intuitively, each rule has at least one matched input element as you would expect.</p>
<p>Every rule has several options for additional customization. They will be discussed from top to bottom of the full syntax provided above:</p>
<ul>
<li>The <code>inheritsFrom(&lt;ruleNameList&gt;)</code> operation is declared when the current <a href="#rule-inheritance">rule inherits from parent rule(s)</a> where <code>ruleNameList</code> is a comma-separated list of strings and the order of inheritance is specified sequentially. An optional <code>abstract</code> tag is used for abstract rules which cannot be matched automatically or applied. </li>
<li><a href="#lazy-rules">Lazy rules</a> can be declared with <code>isLazy()</code> or <code>isUniqueLazy()</code>. These rules are only applicable when the matched input elements are explicitly provided using an expression involving the operation <code>fetch</code>. </li>
<li>A rule defined as <code>isTransient()</code> does not persist the target (output) elements when the target model flushes to physical storage.</li>
</ul>
<p>The input pattern in a rule determines where the rule should be applied and it consists of at least one input element, which can be configured with the following options:
* A <code>filter(&lt;FILTER&gt;)</code> clause enables the user to add a local filter condition that needs to be satisfied by the matched object of the corresponding input element. 
* A <code>derivedWith(&lt;QUERY&gt;)</code> clause is used to declare an input element as <strong>derived</strong> where <code>QUERY</code> is a lambda expression of the "EObject" type used to calculate the value of the match. </p>
<p>Rules can be equipped with <strong>local variables</strong> that can be initialized with using the matched variables. Such local variables are helpful for holding primitive values obtained from the matched objects. These are declared with the block <code>.using("&lt;var_name&gt;", &lt;QUERY&gt;)</code>, where <code>&lt;var_name&gt;</code> is the name of the variable, and <code>&lt;QUERY&gt;</code> is an expression of type <code>Supplier&lt;Object&gt;</code>, which should return the variable value. Local variables can then be used in global filters and actions, both in <code>out</code> elements and in the block <code>endWith</code>.</p>
<p>A <strong>global filter</strong> condition for a rule can be added after the input element block using <code>globalFilter(&lt;FILTER&gt;)</code> clause which allows the user to add filter(s) applicable to the global scope of the rule.</p>
<p>The output pattern of a rule defines the side effects of the rule and consists of at least one output element, which can be configured with the following options:
* An <code>overriding()</code> qualifier is used to override inherited action expression(s) in the output element of a descendant rule, as discussed in <a href="#rule-inheritance">rule inheritance</a>.
* Elements that are used both as input and output can be managed using the options <code>.drop()</code> or <code>.freeze()/.unfreeze()</code>, as explained in the <a href="#in-place-semantics">Subsection In-place Semantics</a>.</p>
<p>Rules can also have the option <code>endWith(&lt;ACTION&gt;)</code> to define an optional <code>&lt;ACTION&gt;</code>, of type <code>Runnable</code>, that can refer to any of the rule's elements and any local variables. Note that the <code>endWith()</code> method is purely for convenience: it enables performing actions at the end of the rule execution for each particular match. </p>
<p>To change the <strong>priority</strong> of a rule, you can use the <code>priority(P)</code> operation where P is a "long" value. Rules with lower priority are applied first by the YAMTL matching algorithm. Additionally, YAMTL provides attribute helpers for computing values during the initialization of the model transformation. </p>
<p>The helpers are defined in  the block <code>helperStore()</code> of the the transformation's constructor. The helper syntax <code>Helper("&lt;helperName&gt;")</code> is used to define an attribute helper with the name in single quotes and is followed by a query lambda expression enclosed in square brackets. </p>
<h2 id="fetch"><code>fetch()</code></h2>
<p>The fetch operation in YAMTL, <code>YAMTLModule::fetch()</code>, is used to retrieve output objects that correspond to given input objects through the application of transformation rules. The main purpose of <code>fetch()</code> is to resolve references to output objects that are created by other rules. Since rules in YAMTL transformations execute independently, they cannot directly access the output objects produced by other rules. The fetch operation serves as a bridge to connect these separate rule contexts.</p>
<p>When a rule's action needs to reference an output element initialized by another rule, it uses fetch with the input object to look up the corresponding output object. For example, <code>fetch(input_object)</code> returns the output object created by the rule that matched <code>input_object</code>.</p>
<h3 id="multiple-elements-in-the-input-pattern">Multiple elements in the Input Pattern</h3>
<p>When the input pattern contains more than one element, instead of using one single input object, a <a href="#pattern-matching-semantics">valid match</a> must be provided by using a map where the keys are <code>&lt;in_object_name&gt;</code>s and the values are the matched <code>EObject</code>s.</p>
<h3 id="multiple-elements-in-the-output-pattern">Multiple Elements in the Output Pattern</h3>
<p>When the output pattern comprises several object patterns, it's necessary to specify which output element we wish to fetch: <code>fetch(&lt;input_matched_object&gt;, "&lt;out_var_name&gt;")</code> will return the output object linked to the output element <code>outVarName</code>. If a matched rule with a complex output pattern also uses the <code>toMany</code> declaration, the output object can be retrieved with <code>fetch(&lt;input_matched_object&gt;, "&lt;out_var_name&gt;", &lt;i&gt;)</code>.</p>
<h3 id="calling-lazy-rules">Calling Lazy Rules</h3>
<p>The fetch operation is the only mechanism available to execute lazy rules, as explained in the <a href="#lazy-rules">subsection Lazy Rules</a>.</p>
<h3 id="helpers">Helpers</h3>
<p>In JVM languages, other than Groovy, the fetch operation is also used to call helpers, as explained in the <a href="#helpers">subsection Helpers</a>.</p>
<h3 id="handling-tomany-rules">Handling ToMany Rules</h3>
<p>ToMany rules can be applied to the same input object multiple times. In such cases, we can retrieve the output objects obtained in each rule application using the operation fetch(), as explained in the <a href="#tomany-rules">subsection ToMany Rules</a>.</p>
<h3 id="variables-in-execution-context">Variables in Execution Context</h3>
<p>In JVM languages, other than Groovy, the fetch operation is also used to call helpers, fetch variables from the execution environment, with the expression <code>fetch("&lt;variable-name&gt;")</code>.</p>
<h2 id="allinstanceseclass"><code>allInstances(EClass)</code></h2>
<p>The <code>allInstances(&lt;typeName&gt;)</code> operation is used to create OCL-like queries in lambda expressions and can be invoked in any of the following expressions: <code>&lt;FILTER&gt;</code>, <code>&lt;QUERY&gt;</code> and <code>&lt;ACTION&gt;</code>.</p>
<h2 id="lazy-rules">Lazy Rules</h2>
<p>Lazy rules, similar to matched rules, transform input objects into output objects. However, unlike matched rules that apply automatically, lazy rules must be explicitly invoked. This can be achieved using the fetch() operation. Since they only execute when called, they produce outputs based on specific inputs without unnecessary runs. This ensures that transformations only occur when required, enhancing both modularisation and efficiency.</p>
<p>There are two types of lazy rules:</p>
<ul>
<li><strong>Standard Lazy Rules</strong> (<code>isLazy()</code>): These are the basic form of lazy rules. Once called, they take specified input elements from the input model and produce corresponding output elements in the output model. However, if invoked multiple times with the same inputs, they may produce redundant output elements. A typical use case that illustrates the use of rules <code>isLazy()</code> is for maintaining a trace or log of all transformation steps, as redundant objects can act as a record of every individual transformation invocation, even if they are from the same input.</li>
<li><strong>Unique Lazy Rules</strong> (<code>isUniqueLazy()</code>): These are an enhanced version of the standard lazy rules. The primary distinction is their guarantee of execution uniqueness. If a unique lazy rule is called more than once with the same input elements, it ensures that the transformation occurs only once. This means that the result of the initial call is cached and reused for subsequent calls with identical inputs, preventing the generation of duplicate output elements. Unique lazy rules repurpose the declarative semantics of matched rules with a lazy evaluation strategy.</li>
</ul>
<p>A lazy rule, whether unique or non-unique, requires explicit invocation to produce an output element. This is executed by using the rule name using the fetch operation as follows:</p>
<ul>
<li><code>fetch(&lt;input_matched_object&gt;, &lt;out_object_name&gt;, &lt;rule_name&gt;)</code> for lazy rules with a single input object and multiple output objects.</li>
<li><code>fetch(&lt;input_matched_object&gt;, &lt;out_object_name&gt;, &lt;rule_name&gt;, &lt;i&gt;)</code> for <code>toMany</code> lazy rules with a single input object and multiple output objects.</li>
<li><code>fetch(&lt;input_matched_object&gt;, &lt;out_object_name&gt;, &lt;rule_name&gt;, &lt;argsMap&gt;)</code> for lazy rules with a single input object and multiple output objects that, in addition, are parameterized. <code>&lt;argsMap&gt;</code> is a map of type <code>Map&lt;String,Object&gt;</code>, where the keys are parameter names and the values are the actual parameter values.</li>
</ul>
<h2 id="helpers_1">Helpers</h2>
<p>A helper in YAMTL streamlines the writing of transformation rules by offering reusable expressions. Think of it as creating utility functions or methods in conventional programming languages.</p>
<p>In YAMTL, you can define helpers using standard constructs from the host programming language:</p>
<ul>
<li><strong>Attributes</strong> with initialization expressions.</li>
<li><strong>Static operations</strong> that apply at the class level across all instances.</li>
<li><strong>Operations</strong> specific to objects.</li>
</ul>
<p>YAMTL further boosts these helpers' utility by caching their computations, optimizing runtime performance. Below, we present how to declare these helpers and call them in your transformations.</p>
<h3 id="attribute-helpers">Attribute Helpers</h3>
<p>The method <code>staticAttribute("&lt;name&gt;", &lt;BODY&gt;)</code> creates an attribute <code>&lt;name&gt;</code>. Its value gets determined by the <code>&lt;BODY&gt;</code> expression, which must be of type <code>Supplier&lt;Object&gt;</code>.</p>
<p>Attribute helpers shine when used with the <code>allInstances(&lt;EClass&gt;)</code> operation. This operation fetches a list containing all instances of the type <code>&lt;EClass&gt;</code> present in the input model. The expression <code>&lt;BODY&gt;</code> must return the value used to initialize the attribute, which can be an <code>EObject</code> or a primitive value.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="5:4"><input checked="checked" id="__tabbed_5_1" name="__tabbed_5" type="radio" /><input id="__tabbed_5_2" name="__tabbed_5" type="radio" /><input id="__tabbed_5_3" name="__tabbed_5" type="radio" /><input id="__tabbed_5_4" name="__tabbed_5" type="radio" /><div class="tabbed-labels"><label for="__tabbed_5_1">Groovy</label><label for="__tabbed_5_2">Xtend</label><label for="__tabbed_5_3">Java</label><label for="__tabbed_5_4">Kotlin</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="language-yamtl-groovy highlight"><pre><span></span><code><span id="__span-20-1"><a id="__codelineno-20-1" name="__codelineno-20-1" href="#__codelineno-20-1"></a><span class="n">staticAttribute</span><span class="o">(</span><span class="s">&quot;&lt;AttributeName&gt;&quot;</span><span class="o">,</span><span class="w"> </span><span class="o">{</span><span class="w">  </span>
</span><span id="__span-20-2"><a id="__codelineno-20-2" name="__codelineno-20-2" href="#__codelineno-20-2"></a><span class="w">    </span><span class="c1">// an expression returning a value from allInstances(&lt;InputEClass&gt;)</span>
</span><span id="__span-20-3"><a id="__codelineno-20-3" name="__codelineno-20-3" href="#__codelineno-20-3"></a><span class="o">})</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="language-yamtl-xtend highlight"><pre><span></span><code><span id="__span-21-1"><a id="__codelineno-21-1" name="__codelineno-21-1" href="#__codelineno-21-1"></a><span class="nc">staticAttribute</span><span class="o">(</span><span class="s2">&quot;&lt;AttributeName&gt;&quot;</span><span class="o">,</span><span class="w"> </span><span class="o">[|</span><span class="w">  </span>
</span><span id="__span-21-2"><a id="__codelineno-21-2" name="__codelineno-21-2" href="#__codelineno-21-2"></a><span class="w">    </span><span class="c1">// an expression returning a value from allInstances(&lt;InputEClass&gt;)</span>
</span><span id="__span-21-3"><a id="__codelineno-21-3" name="__codelineno-21-3" href="#__codelineno-21-3"></a><span class="o">])</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="language-yamtl-java highlight"><pre><span></span><code><span id="__span-22-1"><a id="__codelineno-22-1" name="__codelineno-22-1" href="#__codelineno-22-1"></a><span class="nc">staticAttribute</span><span class="p">(</span><span class="s">&quot;&lt;AttributeName&gt;&quot;</span><span class="p">,</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Supplier</span><span class="o">&lt;</span><span class="n">Object</span><span class="o">&gt;</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w">  </span>
</span><span id="__span-22-2"><a id="__codelineno-22-2" name="__codelineno-22-2" href="#__codelineno-22-2"></a><span class="w">    </span><span class="nd">@Override</span>
</span><span id="__span-22-3"><a id="__codelineno-22-3" name="__codelineno-22-3" href="#__codelineno-22-3"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">Object</span><span class="w"> </span><span class="nf">get</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-22-4"><a id="__codelineno-22-4" name="__codelineno-22-4" href="#__codelineno-22-4"></a><span class="w">        </span><span class="c1">// an expression returning a value from allInstances(&lt;InputEClass&gt;)</span>
</span><span id="__span-22-5"><a id="__codelineno-22-5" name="__codelineno-22-5" href="#__codelineno-22-5"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-22-6"><a id="__codelineno-22-6" name="__codelineno-22-6" href="#__codelineno-22-6"></a><span class="p">});</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="language-yamtl-kotlin highlight"><pre><span></span><code><span id="__span-23-1"><a id="__codelineno-23-1" name="__codelineno-23-1" href="#__codelineno-23-1"></a><span class="nc">staticAttribute</span><span class="p">(</span><span class="s">&quot;&lt;AttributeName&gt;&quot;</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">  </span>
</span><span id="__span-23-2"><a id="__codelineno-23-2" name="__codelineno-23-2" href="#__codelineno-23-2"></a><span class="w">    </span><span class="c1">// an expression returning a value from allInstances(&lt;InputEClass&gt;)</span>
</span><span id="__span-23-3"><a id="__codelineno-23-3" name="__codelineno-23-3" href="#__codelineno-23-3"></a><span class="p">}</span>
</span></code></pre></div>
</div>
</div>
</div>
<p>An attribute helper can then be called by name. While the YAMTL Groovy DSL allows us to consider the attribute helper as a variable using its name (without the String quotes) directly, the operation <code>fetch</code> needs to be used in all other programming languages:</p>
<div class="tabbed-set tabbed-alternate" data-tabs="6:4"><input checked="checked" id="__tabbed_6_1" name="__tabbed_6" type="radio" /><input id="__tabbed_6_2" name="__tabbed_6" type="radio" /><input id="__tabbed_6_3" name="__tabbed_6" type="radio" /><input id="__tabbed_6_4" name="__tabbed_6" type="radio" /><div class="tabbed-labels"><label for="__tabbed_6_1">Groovy</label><label for="__tabbed_6_2">Xtend</label><label for="__tabbed_6_3">Java</label><label for="__tabbed_6_4">Kotlin</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="language-groovy highlight"><pre><span></span><code><span id="__span-24-1"><a id="__codelineno-24-1" name="__codelineno-24-1" href="#__codelineno-24-1"></a><span class="o">&lt;</span><span class="n">AttributeName</span><span class="o">&gt;</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="language-yamtl-xtend highlight"><pre><span></span><code><span id="__span-25-1"><a id="__codelineno-25-1" name="__codelineno-25-1" href="#__codelineno-25-1"></a><span class="ni">fetch</span><span class="o">(</span><span class="s2">&quot;&lt;AttributeName&gt;&quot;</span><span class="o">)</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="language-yamtl-java highlight"><pre><span></span><code><span id="__span-26-1"><a id="__codelineno-26-1" name="__codelineno-26-1" href="#__codelineno-26-1"></a><span class="n">fetch</span><span class="p">(</span><span class="s">&quot;&lt;AttributeName&gt;&quot;</span><span class="p">)</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="language-yamtl-kotlin highlight"><pre><span></span><code><span id="__span-27-1"><a id="__codelineno-27-1" name="__codelineno-27-1" href="#__codelineno-27-1"></a><span class="n">fetch</span><span class="p">(</span><span class="s">&quot;&lt;AttributeName&gt;&quot;</span><span class="p">)</span>
</span></code></pre></div>
</div>
</div>
</div>
<h3 id="static-operation">Static Operation</h3>
<p>To manage static methods, YAMTL uses <code>staticOperation("&lt;name&gt;", &lt;FUNCTION&gt;)</code> to define an operation <code>&lt;name&gt;</code> where <code>&lt;FUNCTION&gt;</code> is a lambda expression with a list of parameters specified as a map. The keys in the map are the names of the parameters, and the values are the actual arguments. Within the body of the lambda expression, you can access the arguments map using <code>argMap</code> and must ensure to return a value.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="7:4"><input checked="checked" id="__tabbed_7_1" name="__tabbed_7" type="radio" /><input id="__tabbed_7_2" name="__tabbed_7" type="radio" /><input id="__tabbed_7_3" name="__tabbed_7" type="radio" /><input id="__tabbed_7_4" name="__tabbed_7" type="radio" /><div class="tabbed-labels"><label for="__tabbed_7_1">Groovy</label><label for="__tabbed_7_2">Xtend</label><label for="__tabbed_7_3">Java</label><label for="__tabbed_7_4">Kotlin</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="language-yamtl-groovy highlight"><pre><span></span><code><span id="__span-28-1"><a id="__codelineno-28-1" name="__codelineno-28-1" href="#__codelineno-28-1"></a><span class="n">staticOperation</span><span class="o">(</span><span class="s">&quot;&lt;OperationName&gt;&quot;</span><span class="o">,</span><span class="w"> </span><span class="o">{</span><span class="w"> </span><span class="n">argMap</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span>
</span><span id="__span-28-2"><a id="__codelineno-28-2" name="__codelineno-28-2" href="#__codelineno-28-2"></a><span class="w">    </span><span class="c1">// returns the value of the parameter with name &lt;param_name&gt;</span>
</span><span id="__span-28-3"><a id="__codelineno-28-3" name="__codelineno-28-3" href="#__codelineno-28-3"></a><span class="w">    </span><span class="n">argMap</span><span class="o">.&lt;</span><span class="n">param_name</span><span class="o">&gt;</span><span class="w"> </span>
</span><span id="__span-28-4"><a id="__codelineno-28-4" name="__codelineno-28-4" href="#__codelineno-28-4"></a><span class="o">})</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="language-yamtl-xtend highlight"><pre><span></span><code><span id="__span-29-1"><a id="__codelineno-29-1" name="__codelineno-29-1" href="#__codelineno-29-1"></a><span class="nc">staticOperation</span><span class="o">(</span><span class="s2">&quot;&lt;OperationName&gt;&quot;</span><span class="o">,</span><span class="w"> </span><span class="o">[</span><span class="w"> </span><span class="n">argMap</span><span class="w"> </span><span class="o">|</span><span class="w"> </span>
</span><span id="__span-29-2"><a id="__codelineno-29-2" name="__codelineno-29-2" href="#__codelineno-29-2"></a><span class="w">    </span><span class="c1">// returns the value of the parameter with name &lt;param_name&gt;</span>
</span><span id="__span-29-3"><a id="__codelineno-29-3" name="__codelineno-29-3" href="#__codelineno-29-3"></a><span class="w">    </span><span class="n">argMap</span><span class="o">.</span><span class="n">get</span><span class="o">(</span><span class="s2">&quot;&lt;param_name&gt;&quot;</span><span class="o">)</span>
</span><span id="__span-29-4"><a id="__codelineno-29-4" name="__codelineno-29-4" href="#__codelineno-29-4"></a><span class="o">])</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="language-yamtl-java highlight"><pre><span></span><code><span id="__span-30-1"><a id="__codelineno-30-1" name="__codelineno-30-1" href="#__codelineno-30-1"></a><span class="nc">staticOperation</span><span class="p">(</span><span class="s">&quot;&lt;OperationName&gt;&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">argMap</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-30-2"><a id="__codelineno-30-2" name="__codelineno-30-2" href="#__codelineno-30-2"></a><span class="w">    </span><span class="c1">// returns the value of the parameter with name &lt;param_name&gt;</span>
</span><span id="__span-30-3"><a id="__codelineno-30-3" name="__codelineno-30-3" href="#__codelineno-30-3"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">argMap</span><span class="p">.</span><span class="na">get</span><span class="p">(</span><span class="s">&quot;&lt;param_name&gt;&quot;</span><span class="p">);</span>
</span><span id="__span-30-4"><a id="__codelineno-30-4" name="__codelineno-30-4" href="#__codelineno-30-4"></a><span class="p">});</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="language-yamtl-kotlin highlight"><pre><span></span><code><span id="__span-31-1"><a id="__codelineno-31-1" name="__codelineno-31-1" href="#__codelineno-31-1"></a><span class="nc">staticOperation</span><span class="p">(</span><span class="s">&quot;&lt;OperationName&gt;&quot;</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">argMap</span><span class="w"> </span><span class="o">-&gt;</span>
</span><span id="__span-31-2"><a id="__codelineno-31-2" name="__codelineno-31-2" href="#__codelineno-31-2"></a><span class="w">    </span><span class="c1">// returns the value of the parameter with name &lt;param_name&gt;</span>
</span><span id="__span-31-3"><a id="__codelineno-31-3" name="__codelineno-31-3" href="#__codelineno-31-3"></a><span class="w">    </span><span class="n">argMap</span><span class="o">[</span><span class="s">&quot;&lt;param_name&gt;&quot;</span><span class="o">]</span>
</span><span id="__span-31-4"><a id="__codelineno-31-4" name="__codelineno-31-4" href="#__codelineno-31-4"></a><span class="p">}</span>
</span></code></pre></div>
</div>
</div>
</div>
<p>Static operations are invoked by their names and the list of arguments, specifying the name of the parameter and the actual argument value. While the YAMTL Groovy DSL allows calling the static operation directly, all other programming languages require the <code>fetch</code> operation:</p>
<div class="tabbed-set tabbed-alternate" data-tabs="8:4"><input checked="checked" id="__tabbed_8_1" name="__tabbed_8" type="radio" /><input id="__tabbed_8_2" name="__tabbed_8" type="radio" /><input id="__tabbed_8_3" name="__tabbed_8" type="radio" /><input id="__tabbed_8_4" name="__tabbed_8" type="radio" /><div class="tabbed-labels"><label for="__tabbed_8_1">Groovy</label><label for="__tabbed_8_2">Xtend</label><label for="__tabbed_8_3">Java</label><label for="__tabbed_8_4">Kotlin</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="language-yamtl-groovy highlight"><pre><span></span><code><span id="__span-32-1"><a id="__codelineno-32-1" name="__codelineno-32-1" href="#__codelineno-32-1"></a><span class="o">&lt;</span><span class="n">OperationName</span><span class="o">&gt;([</span><span class="s">&quot;&lt;param1&gt;&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="o">&lt;</span><span class="n">value1</span><span class="o">&gt;,</span><span class="w"> </span><span class="o">...])</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="language-yamtl-xtend highlight"><pre><span></span><code><span id="__span-33-1"><a id="__codelineno-33-1" name="__codelineno-33-1" href="#__codelineno-33-1"></a><span class="ni">fetch</span><span class="o">(</span><span class="s2">&quot;&lt;OperationName&gt;&quot;</span><span class="o">,</span><span class="w"> </span><span class="err">#</span><span class="o">[</span><span class="s2">&quot;&lt;param1&gt;&quot;</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="o">&lt;</span><span class="n">value1</span><span class="o">&gt;,</span><span class="w"> </span><span class="o">...])</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="language-yamtl-java highlight"><pre><span></span><code><span id="__span-34-1"><a id="__codelineno-34-1" name="__codelineno-34-1" href="#__codelineno-34-1"></a><span class="n">fetch</span><span class="p">(</span><span class="s">&quot;&lt;OperationName&gt;&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">Map</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="s">&quot;&lt;param1&gt;&quot;</span><span class="p">,</span><span class="w"> </span><span class="o">&lt;</span><span class="n">value1</span><span class="o">&gt;</span><span class="p">,</span><span class="w"> </span><span class="p">...));</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="language-yamtl-kotlin highlight"><pre><span></span><code><span id="__span-35-1"><a id="__codelineno-35-1" name="__codelineno-35-1" href="#__codelineno-35-1"></a><span class="n">fetch</span><span class="p">(</span><span class="s">&quot;&lt;OperationName&gt;&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">mapOf</span><span class="p">(</span><span class="s">&quot;&lt;param1&gt;&quot;</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="o">&lt;</span><span class="n">value1</span><span class="o">&gt;</span><span class="p">,</span><span class="w"> </span><span class="p">...))</span>
</span></code></pre></div>
</div>
</div>
</div>
<h3 id="contextual-operation">Contextual Operation</h3>
<p>To manage class methods, YAMTL uses <code>contextualOperation("&lt;name&gt;", &lt;BIFUNCTION&gt;)</code> to define an operation <code>&lt;name&gt;</code> where <code>&lt;BIFUNCTION&gt;</code> is a lambda expression with two parameters: the contextual instance or object to which the operation is applied, and list of parameters specified as a map. The keys in the map are the names of the parameters, and the values are the actual arguments. Within the body of the lambda expression, you can access the contextual instance or the arguments map, and must ensure to return a value, either an <code>EObject</code> or a primitive value.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="9:4"><input checked="checked" id="__tabbed_9_1" name="__tabbed_9" type="radio" /><input id="__tabbed_9_2" name="__tabbed_9" type="radio" /><input id="__tabbed_9_3" name="__tabbed_9" type="radio" /><input id="__tabbed_9_4" name="__tabbed_9" type="radio" /><div class="tabbed-labels"><label for="__tabbed_9_1">Groovy</label><label for="__tabbed_9_2">Xtend</label><label for="__tabbed_9_3">Java</label><label for="__tabbed_9_4">Kotlin</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="language-yamtl-groovy highlight"><pre><span></span><code><span id="__span-36-1"><a id="__codelineno-36-1" name="__codelineno-36-1" href="#__codelineno-36-1"></a><span class="n">contextualOperation</span><span class="o">(</span><span class="s">&quot;&lt;OperationName&gt;&quot;</span><span class="o">,</span><span class="w"> </span><span class="o">{</span><span class="w"> </span><span class="n">obj</span><span class="o">,</span><span class="w"> </span><span class="n">argMap</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span>
</span><span id="__span-36-2"><a id="__codelineno-36-2" name="__codelineno-36-2" href="#__codelineno-36-2"></a><span class="w">    </span><span class="c1">// to access the contextual instance use &#39;obj&#39; </span>
</span><span id="__span-36-3"><a id="__codelineno-36-3" name="__codelineno-36-3" href="#__codelineno-36-3"></a><span class="w">    </span><span class="c1">// to access an argument use &#39;argMap.&lt;param_name&gt;&#39; </span>
</span><span id="__span-36-4"><a id="__codelineno-36-4" name="__codelineno-36-4" href="#__codelineno-36-4"></a><span class="w">    </span><span class="c1">// must return a value</span>
</span><span id="__span-36-5"><a id="__codelineno-36-5" name="__codelineno-36-5" href="#__codelineno-36-5"></a><span class="o">})</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="language-yamtl-xtend highlight"><pre><span></span><code><span id="__span-37-1"><a id="__codelineno-37-1" name="__codelineno-37-1" href="#__codelineno-37-1"></a><span class="nc">contextualOperation</span><span class="o">(</span><span class="s2">&quot;&lt;OperationName&gt;&quot;</span><span class="o">,</span><span class="w"> </span><span class="o">[</span><span class="w"> </span><span class="n">obj</span><span class="o">,</span><span class="w"> </span><span class="n">argMap</span><span class="w"> </span><span class="o">|</span><span class="w"> </span>
</span><span id="__span-37-2"><a id="__codelineno-37-2" name="__codelineno-37-2" href="#__codelineno-37-2"></a><span class="w">    </span><span class="c1">// to access the contextual instance use &#39;obj&#39; </span>
</span><span id="__span-37-3"><a id="__codelineno-37-3" name="__codelineno-37-3" href="#__codelineno-37-3"></a><span class="w">    </span><span class="c1">// to access an argument use &#39;argMap.get(&quot;&lt;param_name&gt;&quot;)&#39; </span>
</span><span id="__span-37-4"><a id="__codelineno-37-4" name="__codelineno-37-4" href="#__codelineno-37-4"></a><span class="w">    </span><span class="c1">// must return a value</span>
</span><span id="__span-37-5"><a id="__codelineno-37-5" name="__codelineno-37-5" href="#__codelineno-37-5"></a><span class="o">])</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="language-yamtl-java highlight"><pre><span></span><code><span id="__span-38-1"><a id="__codelineno-38-1" name="__codelineno-38-1" href="#__codelineno-38-1"></a><span class="nc">contextualOperation</span><span class="p">(</span><span class="s">&quot;&lt;OperationName&gt;&quot;</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="n">obj</span><span class="p">,</span><span class="w"> </span><span class="n">argMap</span><span class="p">)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-38-2"><a id="__codelineno-38-2" name="__codelineno-38-2" href="#__codelineno-38-2"></a><span class="w">    </span><span class="c1">// to access the contextual instance use &#39;obj&#39;</span>
</span><span id="__span-38-3"><a id="__codelineno-38-3" name="__codelineno-38-3" href="#__codelineno-38-3"></a><span class="w">    </span><span class="c1">// to access an argument use &#39;argMap.get(&quot;&lt;param_name&gt;&quot;)&#39;</span>
</span><span id="__span-38-4"><a id="__codelineno-38-4" name="__codelineno-38-4" href="#__codelineno-38-4"></a><span class="w">    </span><span class="c1">// must return a value</span>
</span><span id="__span-38-5"><a id="__codelineno-38-5" name="__codelineno-38-5" href="#__codelineno-38-5"></a><span class="p">});</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="language-yamtl-kotlin highlight"><pre><span></span><code><span id="__span-39-1"><a id="__codelineno-39-1" name="__codelineno-39-1" href="#__codelineno-39-1"></a><span class="nc">contextualOperation</span><span class="p">(</span><span class="s">&quot;&lt;OperationName&gt;&quot;</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">obj</span><span class="p">,</span><span class="w"> </span><span class="n">argMap</span><span class="w"> </span><span class="o">-&gt;</span>
</span><span id="__span-39-2"><a id="__codelineno-39-2" name="__codelineno-39-2" href="#__codelineno-39-2"></a><span class="w">    </span><span class="c1">// to access the contextual instance use &#39;obj&#39;</span>
</span><span id="__span-39-3"><a id="__codelineno-39-3" name="__codelineno-39-3" href="#__codelineno-39-3"></a><span class="w">    </span><span class="c1">// to access an argument use &#39;argMap[&quot;&lt;param_name&gt;&quot;]&#39;</span>
</span><span id="__span-39-4"><a id="__codelineno-39-4" name="__codelineno-39-4" href="#__codelineno-39-4"></a><span class="w">    </span><span class="c1">// must return a value</span>
</span><span id="__span-39-5"><a id="__codelineno-39-5" name="__codelineno-39-5" href="#__codelineno-39-5"></a><span class="p">}</span>
</span></code></pre></div>
</div>
</div>
</div>
<p>Contextual operations are invoked on the <code>&lt;ContextualInstance&gt;</code> using the <code>&lt;OperationName&gt;</code> and the list of arguments, specifying the name of the parameter and the actual argument value. While the YAMTL Groovy DSL allows calling the  operation directly, all other programming languages require the <code>fetch</code> operation:</p>
<div class="tabbed-set tabbed-alternate" data-tabs="10:4"><input checked="checked" id="__tabbed_10_1" name="__tabbed_10" type="radio" /><input id="__tabbed_10_2" name="__tabbed_10" type="radio" /><input id="__tabbed_10_3" name="__tabbed_10" type="radio" /><input id="__tabbed_10_4" name="__tabbed_10" type="radio" /><div class="tabbed-labels"><label for="__tabbed_10_1">Groovy</label><label for="__tabbed_10_2">Xtend</label><label for="__tabbed_10_3">Java</label><label for="__tabbed_10_4">Kotlin</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="language-yamtl-groovy highlight"><pre><span></span><code><span id="__span-40-1"><a id="__codelineno-40-1" name="__codelineno-40-1" href="#__codelineno-40-1"></a><span class="o">&lt;</span><span class="n">OperationName</span><span class="o">&gt;(&lt;</span><span class="n">ContextualInstance</span><span class="o">&gt;,</span><span class="w"> </span><span class="o">[</span><span class="s">&quot;&lt;param1&gt;&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="o">&lt;</span><span class="n">value1</span><span class="o">&gt;,</span><span class="w"> </span><span class="o">...])</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="language-yamtl-xtend highlight"><pre><span></span><code><span id="__span-41-1"><a id="__codelineno-41-1" name="__codelineno-41-1" href="#__codelineno-41-1"></a><span class="o">&lt;</span><span class="n">ContextualInstance</span><span class="o">&gt;.</span><span class="ni">fetch</span><span class="o">(</span><span class="s2">&quot;&lt;OperationName&gt;&quot;</span><span class="o">,</span><span class="w"> </span><span class="err">#</span><span class="o">[</span><span class="s2">&quot;&lt;param1&gt;&quot;</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="o">&lt;</span><span class="n">value1</span><span class="o">&gt;,</span><span class="w"> </span><span class="o">...])</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="language-yamtl-java highlight"><pre><span></span><code><span id="__span-42-1"><a id="__codelineno-42-1" name="__codelineno-42-1" href="#__codelineno-42-1"></a><span class="n">fetch</span><span class="p">(</span><span class="o">&lt;</span><span class="n">ContextualInstance</span><span class="o">&gt;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;&lt;OperationName&gt;&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">Map</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="s">&quot;&lt;param1&gt;&quot;</span><span class="p">,</span><span class="w"> </span><span class="o">&lt;</span><span class="n">value1</span><span class="o">&gt;</span><span class="p">,</span><span class="w"> </span><span class="p">...));</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="language-yamtl-kotlin highlight"><pre><span></span><code><span id="__span-43-1"><a id="__codelineno-43-1" name="__codelineno-43-1" href="#__codelineno-43-1"></a><span class="n">fetch</span><span class="p">(</span><span class="o">&lt;</span><span class="n">ContextualInstance</span><span class="o">&gt;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;&lt;OperationName&gt;&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">mapOf</span><span class="p">(</span><span class="s">&quot;&lt;param1&gt;&quot;</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="o">&lt;</span><span class="n">value1</span><span class="o">&gt;</span><span class="p">,</span><span class="w"> </span><span class="p">...))</span>
</span></code></pre></div>
</div>
</div>
</div>
<h2 id="tomany-rules">ToMany Rules</h2>
<p>Matched rules can be declared with the modifier <code>toMany</code> to enable repeated rule applications to the same input object, using <code>toManyCap</code> to indicate how many rule applications should be performed. With <code>toMany</code> rules, the same rule might match the same object multiple times. In such cases, we can reference each match (occurrence 'i' of a match) by the order in which they occurred: <code>fetch(&lt;input_matched_object&gt;, &lt;i&gt;)</code> will return the output object created by the ith match.</p>
<p>Declaring a rule with the modifier <code>toMany</code> adds the variable <code>matchCount</code> to the execution environment, which is used to distinguish the different rule applications starting from <code>0</code> for the first application. This variable is available during both pattern matching and transformation execution. This means that the variable <code>matchCount</code> can be used in filter expressions</p>
<p>The property <code>toManyCap</code> receives a function of type <code>Supplier&lt;Integer&gt;</code>, which determines the total number of rule applications that should apply to the same match.</p>
<p>When declaring rules using rule inheritance together with the modifier <code>toMany()</code>, all rules in the inheritance hierarchy must be <code>toMany()</code>.</p>
<div class="admonition info">
<p class="admonition-title">Differences with Lazy Rules</p>
<p>A matched rule that is <code>toMany</code> is scheduled by the tranformation engine and not called on demand. However, when it is matched, the same match is associated with a list of rule applications. While the match is still unique for a particular rule, it is shared among several of the rule applications.</p>
</div>
<h2 id="rule-inheritance">Rule Inheritance</h2>
<p>Rule inheritance in YAMTL enables a transformation developer to create a new transformation rule by inheriting the behaviour of multiple existing rules. This mechanism simplifies the transformation process by allowing you to build on existing rule logic without duplicating code, promoting code reuse and encapsulation.</p>
<p>The following characteristics define multiple rule inheritance in YAMTL:</p>
<ul>
<li><strong>Abstract rules</strong>: Abstract rules are defined with the clause <code>.isAbstract()</code>. These rules typically act as templates or base rules that other rules can inherit from. These rules are not executed directly and their input/output pattern elements may refer to abstract classes.</li>
<li><strong>Concrete rules</strong> are rules that are executed if a valid match is found for the input pattern and the output pattern can only refer to concrete classes, i.e., those that can be instantiated in the output model.</li>
<li>A descendant rule can inherit from one or several parent rules using the clause <code>inheritsFrom(&lt;ruleNameList&gt;)</code>, where <code>&lt;ruleNameList&gt;</code> is of type <code>List&lt;String&gt;</code>.</li>
</ul>
<p>When using rule inheritance, rules are expected to be <strong>covariant</strong> both in input elements and in output elements with respect to inheritance relationships in the corresponding metamodels. When an input or an output element is declared in a parent rule but not declared in a child rule, it is implicitly inherited. The semantics of a transformation rule with respect to inheritance is as follows: </p>
<ul>
<li><strong>Pattern matching semantics</strong>. In <strong>matched</strong> input elements, filter expressions are inherited using a leftmost top-down evaluation strategy w.r.t. the inheritance hierarchy defined in clauses <code>inheritsFrom(&lt;ruleNameList&gt;)</code>. When an input element <code>in("&lt;in_object_name1&gt;", &lt;in_object_type1&gt;).filter{ &lt;FILTER1&gt; }</code> is declared in a parent rule but it is not declared in a descendant rule, it is inherited. If the input element <code>in("&lt;in_object_name1&gt;", &lt;in_object_type2&gt;).filter{ &lt;FILTER2&gt; }</code> is also defined in a descendant rule, <code>&lt;FILTER2&gt;</code> refines <code>&lt;FILTER1&gt;</code> by adding more constraints. In other words, both <code>&lt;FILTER1&gt;</code> and <code>&lt;FILTER2&gt;</code> must be satisfied by a match for the descendant rule. In addition, <code>&lt;in_object_type2&gt;</code> can be a subclass of <code>&lt;in_object_type1&gt;</code>. In <strong>derived</strong> input elements, derivation expressions (<code>derivedWith(&lt;QUERY&gt;)</code>) are overriden if they are declared in a descendant rule or simply inherited otherwise.  </li>
<li><strong>Transformation execution semantics</strong>. In output elements, action expressions are also inherited following a leftmost top-down evaluation strategy w.r.t. the inheritance hierarchy by default. When an output element <code>out("&lt;out_object_name&gt;", &lt;out_object_type1&gt;, { &lt;ACTION1&gt; })</code> in a parent rule is refined by an output element <code>out("&lt;out_object_name&gt;", &lt;out_object_type2&gt;, { &lt;ACTION2&gt; })</code> in a descendant rule, where <code>&lt;in_object_type2&gt;</code> may be a subclass of <code>&lt;in_object_type1&gt;</code>, then both <code>&lt;ACTION1&gt;</code> and <code>&lt;ACTION2&gt;</code> will be executed, in that order. The default behaviour can be overriden by using the qualifier <code>overriding()</code> in the corresponding output element of a descendant rule. When using <code>overriding()</code> in an output element, the parent action <code>&lt;ACTION1&gt;</code> is not executed.</li>
</ul>
<p>The following table summarizes the errors that YAMTL detects when parsing model transformation rules when rule inheritance is used:</p>
<table>
<thead>
<tr>
<th>Scope</th>
<th>Error Description</th>
<th>Explanation</th>
<th>Resolution</th>
</tr>
</thead>
<tbody>
<tr>
<td>Rule</td>
<td>Abstract Rule with No Children Rules</td>
<td>An abstract rule should have at least one child rule.</td>
<td>Define child rules for the abstract rule or consider making it non-abstract if no child rules are intended.</td>
</tr>
<tr>
<td>Rule</td>
<td>Concrete Rule Specialized by an Abstract Rule</td>
<td>Occurs when a concrete rule is specialized by an abstract rule, which is not allowed.</td>
<td>Ensure that concrete rules are not specialized by abstract rules.</td>
</tr>
<tr>
<td>Input</td>
<td>Incompatible Input Element Types</td>
<td>Occurs when an input element's type in a descendant rule is not a subtype of the same input element's type in a parent rule.</td>
<td>Make sure that the types of input elements in the descendant rule are compatible with those in the parent rule.</td>
</tr>
<tr>
<td>Input</td>
<td>Mismatched Nature of Input Elements</td>
<td>Occurs when an input element's nature (matched/derived) differs between a rule and its parent rule.</td>
<td>Ensure that the nature of input elements is consistent between the descendant rule and its parent rule.</td>
</tr>
<tr>
<td>Input</td>
<td>Input Element Inherited from Two Separate Parent Rules</td>
<td>An input element cannot be inherited from two separate parent rules.</td>
<td>Avoid inheriting the same input element from two separate parent rules to prevent conflicts.</td>
</tr>
<tr>
<td>Output</td>
<td>Output Element Declared as 'Overriding' with No Parent Rule</td>
<td>Occurs when an output element is declared as 'overriding', but there is no parent rule to override.</td>
<td>Remove the 'overriding' declaration or ensure that the rule has a valid parent rule.</td>
</tr>
<tr>
<td>Output</td>
<td>Incompatible Output Element Types</td>
<td>Occurs when an output element's type in a descendant rule is not a subtype of the same output element's type in a parent rule.</td>
<td>Ensure that the types of output elements in the descendant rule are compatible with those in the parent rule.</td>
</tr>
<tr>
<td>Output</td>
<td>Output Element Declared as 'Drop' with No Valid Input Element</td>
<td>Occurs when an output element is declared as 'drop', but it does not refer to a valid input element.</td>
<td>Check that the 'drop' declaration references a valid input element, or remove it if unnecessary.</td>
</tr>
<tr>
<td>Output</td>
<td>Output Element Inherited from Two Parent Rules with Different Types</td>
<td>An output element cannot be inherited from two parent rules with incompatible types; this results in an error.</td>
<td>Ensure that the types of inherited output elements are compatible between parent rules.</td>
</tr>
<tr>
<td>Output</td>
<td>Rule Inherits the Same Output Element from Two Parent Classes</td>
<td>When a rule inherits the same output element from two parent classes, it's a potential issue, and a warning is issued.</td>
<td>Review the rule's inheritance structure and consider if it leads to unintended behavior.</td>
</tr>
</tbody>
</table>
<p>When a descendant rule inherits the same output element from two different parent rules, situation known as the <a href="https://en.wikipedia.org/wiki/Multiple_inheritance#the-diamond-problem">diamond problem</a>, YAMTL detects the situation and warns the user but the model transformation proceeds using inheritance semantics as explained above.</p>
<div class="admonition tip using rule inheritance to optimize run time">
<p class="admonition-title">Tip</p>
<p>During pattern matching, YAMTL selects the most generic rules first. When a match is found for the parent rule, it then processes the match with the input pattern of the descendant rules using a depth-first strategy.</p>
</div>
<div class="admonition info multiple rule inheritance">
<p class="admonition-title">Info</p>
<p>In the original YAMTL semantics, YAMTL supported multiple rule inheritance in both input patterns and output patterns. Since version 0.3.6, multiple inheritance only applies to output patterns in rules. This feature has been deprecated to facilitate more concise syntax when specifying input patterns in rules.</p>
</div>
<h2 id="module-composition">Module Composition</h2>
<p>YAMTL modules can be imported and used in other Xtend/Java/Groovy classes by creating instances of their main classes. This allows you to reuse the functionality provided by a YAMTL module within your code. A YAMTL module can also incorporate any Java Virtual Machine (JVM) library, extending its functionality by using external code.</p>
<p>Module extension is used for composing modules i.e. creating a subclass of an existing module to extend the capabilities of the base module. When YAMTL modules are extended, the process of initializing rules and attribute helpers begins from the root modules (those that do not extend any other module). Initialization then proceeds along the hierarchy of extended modules, moving from parent modules to their descendants.</p>
<p>When a specializing module declares a rule that is already defined in the parent module (by name), the new rule overrides the existing one. Rules in the parent module can also be extended using rule inheritance.</p>
<h2 id="incremental-model-to-model-transformations">Incremental Model-to-Model Transformations</h2>
<p>By default model-to-model transformations in YAMTL transformations are executed in <strong>batch mode</strong>, where the entire input model is read and a new output model is produced from scratch. However, this approach can be inefficient when dealing with large models or when only a small portion of the model undergoes changes. To address this limitation, incremental model-to-model transformations have emerged as a more efficient alternative.</p>
<p><strong>Incremental</strong> model-to-model transformations in YAMTL extend the capabilities of standard transformations by maintaining a relationship between the source and target models. Rather than reprocessing the entire model, these transformations update only the parts of the target model that correspond to changed elements in the source model. This results in an increase in computational efficiency, particularly in scenarios where models are large, or changes are frequent but localized. </p>
<p>Incremental transformations are commonly used in the following scenarios:</p>
<ul>
<li><strong>Real-Time Systems</strong>: In real-time systems where immediate responsiveness is essential, incremental transformations can deliver results more rapidly.</li>
<li><strong>Collaborative Modeling</strong>: In environments where multiple individuals are modifying a model simultaneously, incremental transformations help maintain a coherent and updated version of the target model.</li>
<li><strong>Continuous Integration</strong>: Incremental transformations are beneficial for continuous development pipelines that require constant model updates.</li>
</ul>
<p>YAMTL support for the incremental evaluation of model transformations relies on the following components:</p>
<ul>
<li>Tracking transformation steps. Every application of a transformation rule to an input model constitutes a transformation step, which associates an input match with a corresponding output match. 
In YAMTL, this tracking occurs implicitly, eliminating the need for user-initiated manual intervention. YAMTL also supports explicit mechanisms for tracking transformation steps.</li>
<li>Tracking feature calls. Structural features in the input model, typically corresponding to objects matched by the input pattern of a rule, are employed for computations within <code>&lt;FILTER&gt;</code>, <code>&lt;QUERY&gt;</code>, or <code>&lt;ACTION&gt;</code> blocks. YAMTL can identify the usage of an accessor method that commences with the get prefix to access a structural feature of an object in the input model. This detection is facilitated through aspect-oriented programming. To enable this functionality, the user must configure the YAMTLModule with the namespace containing the input model's classes. This is accomplished via the configuration option xform.adviseWithinThisNamespaceExpressions(<code>&lt;namespaceList&gt;</code>);, where xform is the YAMTLModule containing rule definitions, and <code>&lt;namespaceList&gt;</code>, of type <code>List&lt;String&gt;</code>, enumerates the namespaces to be instrumented with aspects. A namespace may be specified as a fully qualified package name, such as com.a.y, or may encompass a set of packages using <code>..*</code>, like  <code>com.a.y.*</code>, which includes package <code>com.a.y</code> and its direct subpackages, or <code>com.a.y..*</code>, which includes package <code>com.a.y</code> and <em>all</em> its subpackages.</li>
<li>Tracking changes in a model. Model changes can be classified into two categories: on-the-fly and offline changes. <strong>On-the-fly</strong> changes involve real-time modifications to the objects within a model in memory, whereas <strong>offline</strong> changes pertain to the application of a distinct model describing these alterations. YAMTL employs the EMF Adapter Framework for handling on-the-fly modifications, and utilises the EMF Change Model for processing offline changes. The EMF Change Model is equipped with a change recorder that is capable of serialising the in-memory change description model in XMI format.</li>
</ul>
<p>The execution of an incremental model transformation in YAMTL is performed in two stages:</p>
<ul>
<li><strong>Initial stage</strong>. The model transformation is executed in batch mode and YAMTL stores transformation steps.</li>
<li><strong>Change propagation stage</strong>. Given a source model change (either on-the-fly or offline), YAMTL analyses the impact of the change on the model transformation and only re-evaluates those transformation steps that are affected.</li>
</ul>
<h3 id="template-to-execute-model-transformations">Template to execute model transformations</h3>
<p>The following example code snippets illustrate how to configure and execute a transformation in YAMTL using different programming languages.</p>
<h4 id="using-on-the-fly-changes">Using On-the-Fly Changes</h4>
<p>The code snippets below ilustrate how to execute a model transformation in incremental mode, making a change to the input model once it has been transformed with <code>YAMTLModule::execute()</code>. </p>
<div class="tabbed-set tabbed-alternate" data-tabs="11:4"><input checked="checked" id="__tabbed_11_1" name="__tabbed_11" type="radio" /><input id="__tabbed_11_2" name="__tabbed_11" type="radio" /><input id="__tabbed_11_3" name="__tabbed_11" type="radio" /><input id="__tabbed_11_4" name="__tabbed_11" type="radio" /><div class="tabbed-labels"><label for="__tabbed_11_1">Groovy</label><label for="__tabbed_11_2">Xtend</label><label for="__tabbed_11_3">Java</label><label for="__tabbed_11_4">Kotlin</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="language-groovy highlight"><pre><span></span><code><span id="__span-44-1"><a id="__codelineno-44-1" name="__codelineno-44-1" href="#__codelineno-44-1"></a><span class="c1">// CONFIGURATION</span>
</span><span id="__span-44-2"><a id="__codelineno-44-2" name="__codelineno-44-2" href="#__codelineno-44-2"></a><span class="kt">def</span><span class="w"> </span><span class="n">xform</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">XForm</span><span class="o">()</span>
</span><span id="__span-44-3"><a id="__codelineno-44-3" name="__codelineno-44-3" href="#__codelineno-44-3"></a><span class="n">YAMTLGroovyExtensions</span><span class="o">.</span><span class="na">init</span><span class="o">(</span><span class="k">this</span><span class="o">)</span><span class="w">        </span>
</span><span id="__span-44-4"><a id="__codelineno-44-4" name="__codelineno-44-4" href="#__codelineno-44-4"></a><span class="n">xform</span><span class="o">.</span><span class="na">adviseWithinThisNamespaceExpressions</span><span class="o">(&lt;</span><span class="n">namespaceList</span><span class="o">&gt;);</span>
</span><span id="__span-44-5"><a id="__codelineno-44-5" name="__codelineno-44-5" href="#__codelineno-44-5"></a><span class="n">xform</span><span class="o">.</span><span class="na">executionMode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ExecutionMode</span><span class="o">.</span><span class="na">INCREMENTAL</span>
</span><span id="__span-44-6"><a id="__codelineno-44-6" name="__codelineno-44-6" href="#__codelineno-44-6"></a><span class="n">xform</span><span class="o">.</span><span class="na">loadInputModels</span><span class="o">([</span><span class="s2">&quot;&lt;in_domain_name&gt;&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;&lt;path_to_model&gt;&quot;</span><span class="o">])</span>
</span><span id="__span-44-7"><a id="__codelineno-44-7" name="__codelineno-44-7" href="#__codelineno-44-7"></a><span class="c1">// INITIAL TRANSFORMATION</span>
</span><span id="__span-44-8"><a id="__codelineno-44-8" name="__codelineno-44-8" href="#__codelineno-44-8"></a><span class="n">xform</span><span class="o">.</span><span class="na">execute</span><span class="o">()</span>
</span><span id="__span-44-9"><a id="__codelineno-44-9" name="__codelineno-44-9" href="#__codelineno-44-9"></a><span class="c1">// DELTA PROPAGATION</span>
</span><span id="__span-44-10"><a id="__codelineno-44-10" name="__codelineno-44-10" href="#__codelineno-44-10"></a><span class="n">xform</span><span class="o">.</span><span class="na">adaptInputModel</span><span class="o">(</span><span class="s2">&quot;&lt;in_domain_name&gt;&quot;</span><span class="o">)</span>
</span><span id="__span-44-11"><a id="__codelineno-44-11" name="__codelineno-44-11" href="#__codelineno-44-11"></a><span class="cm">/* CHANGES TO MODEL HERE */</span>
</span><span id="__span-44-12"><a id="__codelineno-44-12" name="__codelineno-44-12" href="#__codelineno-44-12"></a><span class="n">xform</span><span class="o">.</span><span class="na">propagateDelta</span><span class="o">(</span><span class="s2">&quot;&lt;in_domain_name&gt;&quot;</span><span class="o">)</span>
</span><span id="__span-44-13"><a id="__codelineno-44-13" name="__codelineno-44-13" href="#__codelineno-44-13"></a><span class="n">xform</span><span class="o">.</span><span class="na">saveOutputModels</span><span class="o">([</span><span class="s2">&quot;&lt;out_domain_name&gt;&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;&lt;path_to_model&gt;&quot;</span><span class="o">])</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="language-xtend highlight"><pre><span></span><code><span id="__span-45-1"><a id="__codelineno-45-1" name="__codelineno-45-1" href="#__codelineno-45-1"></a><span class="c1">// CONFIGURATION</span>
</span><span id="__span-45-2"><a id="__codelineno-45-2" name="__codelineno-45-2" href="#__codelineno-45-2"></a><span class="n">val</span><span class="w"> </span><span class="n">xform</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">XForm</span><span class="o">()</span>
</span><span id="__span-45-3"><a id="__codelineno-45-3" name="__codelineno-45-3" href="#__codelineno-45-3"></a><span class="n">xform</span><span class="o">.</span><span class="n">adviseWithinThisNamespaceExpressions</span><span class="o">(&lt;</span><span class="n">namespaceList</span><span class="o">&gt;)</span>
</span><span id="__span-45-4"><a id="__codelineno-45-4" name="__codelineno-45-4" href="#__codelineno-45-4"></a><span class="n">xform</span><span class="o">.</span><span class="n">executionMode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ExecutionMode</span><span class="o">.</span><span class="n">INCREMENTAL</span>
</span><span id="__span-45-5"><a id="__codelineno-45-5" name="__codelineno-45-5" href="#__codelineno-45-5"></a><span class="n">xform</span><span class="o">.</span><span class="n">loadInputModels</span><span class="o">(</span><span class="err">#</span><span class="o">{</span><span class="s1">&#39;&lt;in_domain_name&gt;&#39;</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="s1">&#39;&lt;path_to_model&gt;&#39;</span><span class="o">})</span>
</span><span id="__span-45-6"><a id="__codelineno-45-6" name="__codelineno-45-6" href="#__codelineno-45-6"></a><span class="c1">// INITIAL TRANSFORMATION</span>
</span><span id="__span-45-7"><a id="__codelineno-45-7" name="__codelineno-45-7" href="#__codelineno-45-7"></a><span class="n">xform</span><span class="o">.</span><span class="n">execute</span>
</span><span id="__span-45-8"><a id="__codelineno-45-8" name="__codelineno-45-8" href="#__codelineno-45-8"></a><span class="c1">// DELTA PROPAGATION</span>
</span><span id="__span-45-9"><a id="__codelineno-45-9" name="__codelineno-45-9" href="#__codelineno-45-9"></a><span class="n">xform</span><span class="o">.</span><span class="n">adaptInputModel</span><span class="o">(</span><span class="s1">&#39;&lt;in_domain_name&gt;&#39;</span><span class="o">)</span>
</span><span id="__span-45-10"><a id="__codelineno-45-10" name="__codelineno-45-10" href="#__codelineno-45-10"></a><span class="c1">// CHANGES TO MODEL HERE</span>
</span><span id="__span-45-11"><a id="__codelineno-45-11" name="__codelineno-45-11" href="#__codelineno-45-11"></a><span class="n">xform</span><span class="o">.</span><span class="n">propagateDelta</span><span class="o">(</span><span class="s1">&#39;&lt;in_domain_name&gt;&#39;</span><span class="o">)</span>
</span><span id="__span-45-12"><a id="__codelineno-45-12" name="__codelineno-45-12" href="#__codelineno-45-12"></a><span class="n">xform</span><span class="o">.</span><span class="n">saveOutputModels</span><span class="o">(</span><span class="err">#</span><span class="o">{</span><span class="s1">&#39;&lt;out_domain_name&gt;&#39;</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="s1">&#39;&lt;path_to_model&gt;&#39;</span><span class="o">})</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="language-java highlight"><pre><span></span><code><span id="__span-46-1"><a id="__codelineno-46-1" name="__codelineno-46-1" href="#__codelineno-46-1"></a><span class="c1">// CONFIGURATION</span>
</span><span id="__span-46-2"><a id="__codelineno-46-2" name="__codelineno-46-2" href="#__codelineno-46-2"></a><span class="n">XForm</span><span class="w"> </span><span class="n">xform</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">XForm</span><span class="p">();</span>
</span><span id="__span-46-3"><a id="__codelineno-46-3" name="__codelineno-46-3" href="#__codelineno-46-3"></a><span class="n">xform</span><span class="p">.</span><span class="na">adviseWithinThisNamespaceExpressions</span><span class="p">(</span><span class="o">&lt;</span><span class="n">namespaceList</span><span class="o">&gt;</span><span class="p">);</span>
</span><span id="__span-46-4"><a id="__codelineno-46-4" name="__codelineno-46-4" href="#__codelineno-46-4"></a><span class="n">xform</span><span class="p">.</span><span class="na">setExecutionMode</span><span class="p">(</span><span class="n">ExecutionMode</span><span class="p">.</span><span class="na">INCREMENTAL</span><span class="p">);</span>
</span><span id="__span-46-5"><a id="__codelineno-46-5" name="__codelineno-46-5" href="#__codelineno-46-5"></a><span class="n">xform</span><span class="p">.</span><span class="na">loadInputModels</span><span class="p">(</span><span class="n">Map</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="s">&quot;&lt;in_domain_name&gt;&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;&lt;path_to_model&gt;&quot;</span><span class="p">));</span>
</span><span id="__span-46-6"><a id="__codelineno-46-6" name="__codelineno-46-6" href="#__codelineno-46-6"></a><span class="c1">// INITIAL TRANSFORMATION</span>
</span><span id="__span-46-7"><a id="__codelineno-46-7" name="__codelineno-46-7" href="#__codelineno-46-7"></a><span class="n">xform</span><span class="p">.</span><span class="na">execute</span><span class="p">();</span>
</span><span id="__span-46-8"><a id="__codelineno-46-8" name="__codelineno-46-8" href="#__codelineno-46-8"></a><span class="c1">// DELTA PROPAGATION</span>
</span><span id="__span-46-9"><a id="__codelineno-46-9" name="__codelineno-46-9" href="#__codelineno-46-9"></a><span class="n">xform</span><span class="p">.</span><span class="na">adaptInputModel</span><span class="p">(</span><span class="s">&quot;&lt;in_domain_name&gt;&quot;</span><span class="p">);</span>
</span><span id="__span-46-10"><a id="__codelineno-46-10" name="__codelineno-46-10" href="#__codelineno-46-10"></a><span class="c1">// CHANGES TO MODEL HERE</span>
</span><span id="__span-46-11"><a id="__codelineno-46-11" name="__codelineno-46-11" href="#__codelineno-46-11"></a><span class="n">xform</span><span class="p">.</span><span class="na">propagateDelta</span><span class="p">(</span><span class="s">&quot;&lt;in_domain_name&gt;&quot;</span><span class="p">);</span>
</span><span id="__span-46-12"><a id="__codelineno-46-12" name="__codelineno-46-12" href="#__codelineno-46-12"></a><span class="n">xform</span><span class="p">.</span><span class="na">saveOutputModels</span><span class="p">(</span><span class="n">Map</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="s">&quot;&lt;out_domain_name&gt;&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;&lt;path_to_model&gt;&quot;</span><span class="p">));</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="language-kotlin highlight"><pre><span></span><code><span id="__span-47-1"><a id="__codelineno-47-1" name="__codelineno-47-1" href="#__codelineno-47-1"></a><span class="c1">// CONFIGURATION</span>
</span><span id="__span-47-2"><a id="__codelineno-47-2" name="__codelineno-47-2" href="#__codelineno-47-2"></a><span class="kd">val</span><span class="w"> </span><span class="nv">xform</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">XForm</span><span class="p">()</span>
</span><span id="__span-47-3"><a id="__codelineno-47-3" name="__codelineno-47-3" href="#__codelineno-47-3"></a><span class="n">xform</span><span class="p">.</span><span class="na">adviseWithinThisNamespaceExpressions</span><span class="p">(</span><span class="o">&lt;</span><span class="n">namespaceList</span><span class="o">&gt;</span><span class="p">)</span>
</span><span id="__span-47-4"><a id="__codelineno-47-4" name="__codelineno-47-4" href="#__codelineno-47-4"></a><span class="n">xform</span><span class="p">.</span><span class="na">setExecutionMode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ExecutionMode</span><span class="p">.</span><span class="na">INCREMENTAL</span>
</span><span id="__span-47-5"><a id="__codelineno-47-5" name="__codelineno-47-5" href="#__codelineno-47-5"></a><span class="n">xform</span><span class="p">.</span><span class="na">loadInputModels</span><span class="p">(</span><span class="n">mapOf</span><span class="p">(</span><span class="s">&quot;&lt;in_domain_name&gt;&quot;</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="s">&quot;&lt;path_to_model&gt;&quot;</span><span class="p">))</span>
</span><span id="__span-47-6"><a id="__codelineno-47-6" name="__codelineno-47-6" href="#__codelineno-47-6"></a><span class="c1">// INITIAL TRANSFORMATION</span>
</span><span id="__span-47-7"><a id="__codelineno-47-7" name="__codelineno-47-7" href="#__codelineno-47-7"></a><span class="n">xform</span><span class="p">.</span><span class="na">execute</span><span class="p">()</span>
</span><span id="__span-47-8"><a id="__codelineno-47-8" name="__codelineno-47-8" href="#__codelineno-47-8"></a><span class="c1">// DELTA PROPAGATION</span>
</span><span id="__span-47-9"><a id="__codelineno-47-9" name="__codelineno-47-9" href="#__codelineno-47-9"></a><span class="n">xform</span><span class="p">.</span><span class="na">adaptInputModel</span><span class="p">(</span><span class="s">&quot;&lt;in_domain_name&gt;&quot;</span><span class="p">)</span>
</span><span id="__span-47-10"><a id="__codelineno-47-10" name="__codelineno-47-10" href="#__codelineno-47-10"></a><span class="c1">// CHANGES TO MODEL HERE</span>
</span><span id="__span-47-11"><a id="__codelineno-47-11" name="__codelineno-47-11" href="#__codelineno-47-11"></a><span class="n">xform</span><span class="p">.</span><span class="na">propagateDelta</span><span class="p">(</span><span class="s">&quot;&lt;in_domain_name&gt;&quot;</span><span class="p">)</span>
</span><span id="__span-47-12"><a id="__codelineno-47-12" name="__codelineno-47-12" href="#__codelineno-47-12"></a><span class="n">xform</span><span class="p">.</span><span class="na">saveOutputModels</span><span class="p">(</span><span class="n">mapOf</span><span class="p">(</span><span class="s">&quot;&lt;out_domain_name&gt;&quot;</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="s">&quot;&lt;path_to_model&gt;&quot;</span><span class="p">))</span>
</span></code></pre></div>
</div>
</div>
</div>
<p>Incremental transformations are activated by setting the execution mode to <code>ExecutionMode.INCREMENTAL</code>.</p>
<p>The YAMTL engine is instructed on the locations for instrumenting <code>getter</code> methods through the statement <code>xform.adviseWithinThisNamespaceExpressions(&lt;namespaceList&gt;)</code>, specifying the pertinent package names.</p>
<p>For change tracking, the <code>xform.adaptInputModel("&lt;in_domain_name&gt;")</code> statement is used to instrument the input model with EMF adapters. It is important to abstain from adapting the model prior to invoking <code>execute()</code>, in order to minimise the extent of changes requiring monitoring. Changes are made by accessing objects in the <code>Resource</code> of the input model, which can be accessed using <code>xform.getModelResource("&lt;in_domain_name&gt;")</code>, and applying changes to their structural features.</p>
<p>Subsequently, the <code>xform.propagateDelta("&lt;in_domain_name&gt;")</code> statement facilitates the propagation of any changes made from the input model to the output model.</p>
<h4 id="using-offline-changes">Using Offline Changes</h4>
<div class="tabbed-set tabbed-alternate" data-tabs="12:4"><input checked="checked" id="__tabbed_12_1" name="__tabbed_12" type="radio" /><input id="__tabbed_12_2" name="__tabbed_12" type="radio" /><input id="__tabbed_12_3" name="__tabbed_12" type="radio" /><input id="__tabbed_12_4" name="__tabbed_12" type="radio" /><div class="tabbed-labels"><label for="__tabbed_12_1">Groovy</label><label for="__tabbed_12_2">Xtend</label><label for="__tabbed_12_3">Java</label><label for="__tabbed_12_4">Kotlin</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="language-groovy highlight"><pre><span></span><code><span id="__span-48-1"><a id="__codelineno-48-1" name="__codelineno-48-1" href="#__codelineno-48-1"></a><span class="c1">// CONFIGURATION</span>
</span><span id="__span-48-2"><a id="__codelineno-48-2" name="__codelineno-48-2" href="#__codelineno-48-2"></a><span class="kt">def</span><span class="w"> </span><span class="n">xform</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">XForm</span><span class="o">()</span>
</span><span id="__span-48-3"><a id="__codelineno-48-3" name="__codelineno-48-3" href="#__codelineno-48-3"></a><span class="n">YAMTLGroovyExtensions</span><span class="o">.</span><span class="na">init</span><span class="o">(</span><span class="k">this</span><span class="o">)</span><span class="w">        </span>
</span><span id="__span-48-4"><a id="__codelineno-48-4" name="__codelineno-48-4" href="#__codelineno-48-4"></a><span class="n">xform</span><span class="o">.</span><span class="na">adviseWithinThisNamespaceExpressions</span><span class="o">(&lt;</span><span class="n">namespaceList</span><span class="o">&gt;);</span>
</span><span id="__span-48-5"><a id="__codelineno-48-5" name="__codelineno-48-5" href="#__codelineno-48-5"></a><span class="n">xform</span><span class="o">.</span><span class="na">executionMode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ExecutionMode</span><span class="o">.</span><span class="na">INCREMENTAL</span>
</span><span id="__span-48-6"><a id="__codelineno-48-6" name="__codelineno-48-6" href="#__codelineno-48-6"></a><span class="n">xform</span><span class="o">.</span><span class="na">loadInputModels</span><span class="o">([</span><span class="s2">&quot;&lt;in_domain_name&gt;&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;&lt;path_to_model&gt;&quot;</span><span class="o">])</span>
</span><span id="__span-48-7"><a id="__codelineno-48-7" name="__codelineno-48-7" href="#__codelineno-48-7"></a><span class="c1">// INITIAL TRANSFORMATION</span>
</span><span id="__span-48-8"><a id="__codelineno-48-8" name="__codelineno-48-8" href="#__codelineno-48-8"></a><span class="n">xform</span><span class="o">.</span><span class="na">execute</span><span class="o">()</span>
</span><span id="__span-48-9"><a id="__codelineno-48-9" name="__codelineno-48-9" href="#__codelineno-48-9"></a><span class="c1">// DELTA PROPAGATION</span>
</span><span id="__span-48-10"><a id="__codelineno-48-10" name="__codelineno-48-10" href="#__codelineno-48-10"></a><span class="n">xform</span><span class="o">.</span><span class="na">loadDelta</span><span class="o">(</span><span class="s2">&quot;&lt;in_domain_name&gt;&quot;</span><span class="o">,</span><span class="w"> </span><span class="s2">&quot;&lt;deltaName&gt;&quot;</span><span class="o">,</span><span class="w"> </span><span class="s2">&quot;&lt;path/to/delta/file.xmi&gt;&quot;</span><span class="o">)</span>
</span><span id="__span-48-11"><a id="__codelineno-48-11" name="__codelineno-48-11" href="#__codelineno-48-11"></a><span class="n">xform</span><span class="o">.</span><span class="na">applyAndPropagateDelta</span><span class="o">(</span><span class="s2">&quot;&lt;in_domain_name&gt;&quot;</span><span class="o">,</span><span class="w"> </span><span class="s2">&quot;&lt;deltaName&gt;&quot;</span><span class="o">)</span>
</span><span id="__span-48-12"><a id="__codelineno-48-12" name="__codelineno-48-12" href="#__codelineno-48-12"></a><span class="n">xform</span><span class="o">.</span><span class="na">saveOutputModels</span><span class="o">([</span><span class="s2">&quot;&lt;out_domain_name&gt;&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;&lt;path_to_model&gt;&quot;</span><span class="o">])</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="language-xtend highlight"><pre><span></span><code><span id="__span-49-1"><a id="__codelineno-49-1" name="__codelineno-49-1" href="#__codelineno-49-1"></a><span class="c1">// CONFIGURATION</span>
</span><span id="__span-49-2"><a id="__codelineno-49-2" name="__codelineno-49-2" href="#__codelineno-49-2"></a><span class="n">val</span><span class="w"> </span><span class="n">xform</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">XForm</span><span class="o">()</span>
</span><span id="__span-49-3"><a id="__codelineno-49-3" name="__codelineno-49-3" href="#__codelineno-49-3"></a><span class="n">xform</span><span class="o">.</span><span class="n">adviseWithinThisNamespaceExpressions</span><span class="o">(&lt;</span><span class="n">namespaceList</span><span class="o">&gt;)</span>
</span><span id="__span-49-4"><a id="__codelineno-49-4" name="__codelineno-49-4" href="#__codelineno-49-4"></a><span class="n">xform</span><span class="o">.</span><span class="n">executionMode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ExecutionMode</span><span class="o">.</span><span class="n">INCREMENTAL</span>
</span><span id="__span-49-5"><a id="__codelineno-49-5" name="__codelineno-49-5" href="#__codelineno-49-5"></a><span class="n">xform</span><span class="o">.</span><span class="n">loadInputModels</span><span class="o">(</span><span class="err">#</span><span class="o">{</span><span class="s1">&#39;&lt;in_domain_name&gt;&#39;</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="s1">&#39;&lt;path_to_model&gt;&#39;</span><span class="o">})</span>
</span><span id="__span-49-6"><a id="__codelineno-49-6" name="__codelineno-49-6" href="#__codelineno-49-6"></a><span class="c1">// INITIAL TRANSFORMATION</span>
</span><span id="__span-49-7"><a id="__codelineno-49-7" name="__codelineno-49-7" href="#__codelineno-49-7"></a><span class="n">xform</span><span class="o">.</span><span class="n">execute</span>
</span><span id="__span-49-8"><a id="__codelineno-49-8" name="__codelineno-49-8" href="#__codelineno-49-8"></a><span class="c1">// DELTA PROPAGATION</span>
</span><span id="__span-49-9"><a id="__codelineno-49-9" name="__codelineno-49-9" href="#__codelineno-49-9"></a><span class="n">xform</span><span class="o">.</span><span class="n">loadDelta</span><span class="o">(</span><span class="s2">&quot;&lt;in_domain_name&gt;&quot;</span><span class="o">,</span><span class="w"> </span><span class="s2">&quot;&lt;deltaName&gt;&quot;</span><span class="o">,</span><span class="w"> </span><span class="s2">&quot;&lt;path/to/delta/file.xmi&gt;&quot;</span><span class="o">)</span>
</span><span id="__span-49-10"><a id="__codelineno-49-10" name="__codelineno-49-10" href="#__codelineno-49-10"></a><span class="n">xform</span><span class="o">.</span><span class="n">applyAndPropagateDelta</span><span class="o">(</span><span class="s2">&quot;&lt;in_domain_name&gt;&quot;</span><span class="o">,</span><span class="w"> </span><span class="s2">&quot;&lt;deltaName&gt;&quot;</span><span class="o">)</span>
</span><span id="__span-49-11"><a id="__codelineno-49-11" name="__codelineno-49-11" href="#__codelineno-49-11"></a><span class="n">xform</span><span class="o">.</span><span class="n">saveOutputModels</span><span class="o">(</span><span class="err">#</span><span class="o">{</span><span class="s1">&#39;&lt;out_domain_name&gt;&#39;</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="s1">&#39;&lt;path_to_model&gt;&#39;</span><span class="o">})</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="language-java highlight"><pre><span></span><code><span id="__span-50-1"><a id="__codelineno-50-1" name="__codelineno-50-1" href="#__codelineno-50-1"></a><span class="c1">// CONFIGURATION</span>
</span><span id="__span-50-2"><a id="__codelineno-50-2" name="__codelineno-50-2" href="#__codelineno-50-2"></a><span class="n">XForm</span><span class="w"> </span><span class="n">xform</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">XForm</span><span class="p">();</span>
</span><span id="__span-50-3"><a id="__codelineno-50-3" name="__codelineno-50-3" href="#__codelineno-50-3"></a><span class="n">xform</span><span class="p">.</span><span class="na">adviseWithinThisNamespaceExpressions</span><span class="p">(</span><span class="o">&lt;</span><span class="n">namespaceList</span><span class="o">&gt;</span><span class="p">);</span>
</span><span id="__span-50-4"><a id="__codelineno-50-4" name="__codelineno-50-4" href="#__codelineno-50-4"></a><span class="n">xform</span><span class="p">.</span><span class="na">setExecutionMode</span><span class="p">(</span><span class="n">ExecutionMode</span><span class="p">.</span><span class="na">INCREMENTAL</span><span class="p">);</span>
</span><span id="__span-50-5"><a id="__codelineno-50-5" name="__codelineno-50-5" href="#__codelineno-50-5"></a><span class="n">xform</span><span class="p">.</span><span class="na">loadInputModels</span><span class="p">(</span><span class="n">Map</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="s">&quot;&lt;in_domain_name&gt;&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;&lt;path_to_model&gt;&quot;</span><span class="p">));</span>
</span><span id="__span-50-6"><a id="__codelineno-50-6" name="__codelineno-50-6" href="#__codelineno-50-6"></a><span class="c1">// INITIAL TRANSFORMATION</span>
</span><span id="__span-50-7"><a id="__codelineno-50-7" name="__codelineno-50-7" href="#__codelineno-50-7"></a><span class="n">xform</span><span class="p">.</span><span class="na">execute</span><span class="p">();</span>
</span><span id="__span-50-8"><a id="__codelineno-50-8" name="__codelineno-50-8" href="#__codelineno-50-8"></a><span class="c1">// DELTA PROPAGATION</span>
</span><span id="__span-50-9"><a id="__codelineno-50-9" name="__codelineno-50-9" href="#__codelineno-50-9"></a><span class="n">xform</span><span class="p">.</span><span class="na">loadDelta</span><span class="p">(</span><span class="s">&quot;&lt;in_domain_name&gt;&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;&lt;deltaName&gt;&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;&lt;path/to/delta/file.xmi&gt;&quot;</span><span class="p">);</span>
</span><span id="__span-50-10"><a id="__codelineno-50-10" name="__codelineno-50-10" href="#__codelineno-50-10"></a><span class="n">xform</span><span class="p">.</span><span class="na">applyAndPropagateDelta</span><span class="p">(</span><span class="s">&quot;&lt;in_domain_name&gt;&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;&lt;deltaName&gt;&quot;</span><span class="p">);</span>
</span><span id="__span-50-11"><a id="__codelineno-50-11" name="__codelineno-50-11" href="#__codelineno-50-11"></a><span class="n">xform</span><span class="p">.</span><span class="na">saveOutputModels</span><span class="p">(</span><span class="n">Map</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="s">&quot;&lt;out_domain_name&gt;&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;&lt;path_to_model&gt;&quot;</span><span class="p">));</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="language-kotlin highlight"><pre><span></span><code><span id="__span-51-1"><a id="__codelineno-51-1" name="__codelineno-51-1" href="#__codelineno-51-1"></a><span class="c1">// CONFIGURATION</span>
</span><span id="__span-51-2"><a id="__codelineno-51-2" name="__codelineno-51-2" href="#__codelineno-51-2"></a><span class="kd">val</span><span class="w"> </span><span class="nv">xform</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">XForm</span><span class="p">()</span>
</span><span id="__span-51-3"><a id="__codelineno-51-3" name="__codelineno-51-3" href="#__codelineno-51-3"></a><span class="n">xform</span><span class="p">.</span><span class="na">adviseWithinThisNamespaceExpressions</span><span class="p">(</span><span class="o">&lt;</span><span class="n">namespaceList</span><span class="o">&gt;</span><span class="p">)</span>
</span><span id="__span-51-4"><a id="__codelineno-51-4" name="__codelineno-51-4" href="#__codelineno-51-4"></a><span class="n">xform</span><span class="p">.</span><span class="na">executionMode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ExecutionMode</span><span class="p">.</span><span class="na">INCREMENTAL</span>
</span><span id="__span-51-5"><a id="__codelineno-51-5" name="__codelineno-51-5" href="#__codelineno-51-5"></a><span class="n">xform</span><span class="p">.</span><span class="na">loadInputModels</span><span class="p">(</span><span class="n">mapOf</span><span class="p">(</span><span class="s">&quot;&lt;in_domain_name&gt;&quot;</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="s">&quot;&lt;path_to_model&gt;&quot;</span><span class="p">))</span>
</span><span id="__span-51-6"><a id="__codelineno-51-6" name="__codelineno-51-6" href="#__codelineno-51-6"></a><span class="c1">// INITIAL TRANSFORMATION</span>
</span><span id="__span-51-7"><a id="__codelineno-51-7" name="__codelineno-51-7" href="#__codelineno-51-7"></a><span class="n">xform</span><span class="p">.</span><span class="na">execute</span><span class="p">()</span>
</span><span id="__span-51-8"><a id="__codelineno-51-8" name="__codelineno-51-8" href="#__codelineno-51-8"></a><span class="c1">// DELTA PROPAGATION</span>
</span><span id="__span-51-9"><a id="__codelineno-51-9" name="__codelineno-51-9" href="#__codelineno-51-9"></a><span class="n">xform</span><span class="p">.</span><span class="na">loadDelta</span><span class="p">(</span><span class="s">&quot;&lt;in_domain_name&gt;&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;&lt;deltaName&gt;&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;&lt;path/to/delta/file.xmi&gt;&quot;</span><span class="p">)</span>
</span><span id="__span-51-10"><a id="__codelineno-51-10" name="__codelineno-51-10" href="#__codelineno-51-10"></a><span class="n">xform</span><span class="p">.</span><span class="na">applyAndPropagateDelta</span><span class="p">(</span><span class="s">&quot;&lt;in_domain_name&gt;&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;&lt;deltaName&gt;&quot;</span><span class="p">)</span>
</span><span id="__span-51-11"><a id="__codelineno-51-11" name="__codelineno-51-11" href="#__codelineno-51-11"></a><span class="n">xform</span><span class="p">.</span><span class="na">saveOutputModels</span><span class="p">(</span><span class="n">mapOf</span><span class="p">(</span><span class="s">&quot;&lt;out_domain_name&gt;&quot;</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="s">&quot;&lt;path_to_model&gt;&quot;</span><span class="p">))</span>
</span></code></pre></div>
</div>
</div>
</div>
<p>The primary distinction when employing offline changes lies in the provision of changes to the input model via a change description model, as defined by the EMF Change Model<sup id="fnref:2"><a class="footnote-ref" href="#fn:2">1</a></sup>. The statement <code>xform.loadDelta("&lt;in_domain_name&gt;", "&lt;deltaName&gt;", "&lt;path/to/delta/file.xmi&gt;")</code> loads the change stored at <code>&lt;path/to/delta/file.xmi&gt;</code>, subsequently associating it with the input model identified by <code>&lt;in_domain_name&gt;</code> and a user-defined name <code>&lt;deltaName&gt;</code>.</p>
<p>For the propagation of this change, it first needs to be applied to the input model and then needs to be propagated to the output model. This is achieved via the statement <code>xform.applyAndPropagateDelta("&lt;in_domain_name&gt;", "&lt;deltaName&gt;")</code>.</p>
<h3 id="incrementality-granularity">Incrementality granularity</h3>
<p>YAMTL is an internal DSL of JVM programming languages and specific design decisions have been made in order to reuse as much syntax from the underlying host programming language as possible. In particular, assignments of values to object features (attributes and references) are handled by the assignment statement in the host language.</p>
<p>In general terms, YAMTL checks whether a change invalidates the match of an existing transformation step. If the match is no longer valid, the transformation step is undone. Otherwise, the transformation step will be re-executed according to the following levels of granularity:</p>
<ul>
<li>Tranformation step granularity (<code>IncrementalGranularity.TRAFO_STEP</code>): When a change impacts any part of a transformation step, the match whole transformation step is re-executed. This is the default granularity level.</li>
<li>Element granularity (<code>IncrementalGranularity.ELEMENT</code>): This is a more refined mode in which YAMTL detects whether a change only affects a particular <code>in</code> or <code>out</code> element. YAMTL only re-evaluates the filters of affected <code>in</code> elements and the actions of affected <code>out</code> elements.</li>
</ul>
<p>The granularity of the incremental evaluation scope is set using the flag <code>YAMTLModule::incrementalGranularity</code>. By default, it is set to <code>IncrementalGranularity.TRAFO_STEP</code> and it can be set to <code>IncrementalGranularity.ELEMENT</code>.</p>
<h3 id="undo">Undo</h3>
<div class="admonition todo">
<p class="admonition-title">Todo</p>
</div>
<h3 id="implicit-vs-explicit-traceability">Implicit vs explicit traceability</h3>
<div class="admonition todo">
<p class="admonition-title">Todo</p>
</div>
<h2 id="examples">Examples</h2>
<ul>
<li>
<p>The <a href="examples/linked-list-reversal-example.html">Linked list reversal</a> example reverses a linked list data structure originally stored in XMI format (source model). YAMTL transformation generates an <code>outputList.xmi</code> containing the target model. Both source and target metamodels are created using the same ECore file since the data structure remains the same after the transformation. A Gradle test runs a Groovy script that loads the input model, executes the transformation, and saves the output model.</p>
</li>
<li>
<p><a href="examples/flowchart-to-html-example.html">Flowchart to HTML</a> project looks at transforming flowchart models into valid HTML documents. This project specifically has multiple transformation examples that cover a wide range of YAMTL operations, annotations, and core concepts. This project is perfect for readers who want to take the next step in learning more about the complete functionality of each MTL tool in well-documented bite-sized examples.</p>
</li>
</ul>
<h2 id="trade-offs-regarding-performance">Trade-offs regarding performance</h2>
<div class="admonition todo">
<p class="admonition-title">Todo</p>
</div>
<ul>
<li>Groovy vs Xtend/Java: Groovy offers a more readable syntax</li>
<li>SpringAOP vs AspectJ: SpringAOP simplifies configuration</li>
</ul>
<div class="footnote">
<hr />
<ol>
<li id="fn:2">
<p>David Steinberg, Frank Budinsky, Marcelo Paternostro, and Ed Merks. 2009. EMF: Eclipse Modeling Framework 2.0 (2nd. ed.). Addison-Wesley Professional.&#160;<a class="footnote-backref" href="#fnref:2" title="Jump back to footnote 1 in the text">&#8617;</a></p>
</li>
</ol>
</div>

  <hr>
<div class="md-source-file">
  <small>
    
      Last update:
      <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date">November 17, 2023</span>
      
    
  </small>
</div>


  




                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var tab,labels=set.querySelector(".tabbed-labels");for(tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
      <div class="md-consent" data-md-component="consent" id="__consent" hidden>
        <div class="md-consent__overlay"></div>
        <aside class="md-consent__inner">
          <form class="md-consent__form md-grid md-typeset" name="consent">
            

  
    
  




  


<h4>Cookie consent</h4>
<p>We use cookies to recognize your repeated visits and preferences, as well as to measure the effectiveness of our documentation and whether users find what they're searching for. With your consent, you're helping us to make our documentation better.</p>
<input class="md-toggle" type="checkbox" id="__settings" >
<div class="md-consent__settings">
  <ul class="task-list">
    
      
      
        
        
      
      <li class="task-list-item">
        <label class="task-list-control">
          <input type="checkbox" name="analytics" checked>
          <span class="task-list-indicator"></span>
          Google Analytics
        </label>
      </li>
    
  </ul>
</div>
<div class="md-consent__controls">
  
    
      <button class="md-button md-button--primary">Accept</button>
    
    
    
  
    
    
    
      <label class="md-button" for="__settings">Manage settings</label>
    
  
</div>
          </form>
        </aside>
      </div>
      <script>var consent=__md_get("__consent");if(consent)for(var input of document.forms.consent.elements)input.name&&(input.checked=consent[input.name]||!1);else"file:"!==location.protocol&&setTimeout(function(){document.querySelector("[data-md-component=consent]").hidden=!1},250);var action,form=document.forms.consent;for(action of["submit","reset"])form.addEventListener(action,function(e){if(e.preventDefault(),"reset"===e.type)for(var n of document.forms.consent.elements)n.name&&(n.checked=!1);__md_set("__consent",Object.fromEntries(Array.from(new FormData(form).keys()).map(function(e){return[e,!0]}))),location.hash="",location.reload()})</script>
    
    <script id="__config" type="application/json">{"base": ".", "features": ["content.code.copy", "content.tabs.link"], "search": "assets/javascripts/workers/search.f886a092.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="assets/javascripts/bundle.81fa17fe.min.js"></script>
      
    
  </body>
</html>